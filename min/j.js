function ia(e,k){w=e||u.lossst_page||"hub";document.body.outerHTML='<body id=b class="'+w+'">\n<div id=perspective>\n<div id=scene style="transform:translateX(-140vh)translateY(-72vh)rotateZ(90deg)translateZ(119vh);transform-origin:142vh 72vh">\n<div id=objects></div>\n<div id=puzzle></div>\n<div id=snake></div>\n<div id=snake2></div>\n</div>\n</div>\n<center id=mobilecontrols style=\'font:5vh arial,sans-serif;color:#fff;position:fixed;bottom:9vh;left:0;width:100vw\'>\n<button id=k_up class=hidden ontouchstart="touchstart(38)" ontouchend="touchend(38)">\u2191</button>\n<button id=k_down class=hidden ontouchstart="touchstart(40)" ontouchend="touchend(40)">\u2193</button>\n<button id=k_left class=hidden ontouchstart="touchstart(37)" ontouchend="touchend(37)">\u2190</button>\n<button id=k_right class=hidden ontouchstart="touchstart(39)" ontouchend="touchend(39)">\u2192</button>\n<button id=k_top class=hidden ontouchstart="touchstart(16)" ontouchend="touchend(16)">\u2b06\ufe0e</button>\n<button id=k_bottom class=hidden ontouchstart="touchstart(17)" ontouchend="touchend(17)">\u2b07\ufe0e</button>\n<button id=k_backtrack class=hidden ontouchstart="touchstart(18)" ontouchend="touchend(18)">\u21a9</button>\n<button id=k_reset class=hidden ontouchstart="touchstart(82)" ontouchend="touchend(82)">\u00d7</button>\n<button id=k_camleft class=hidden ontouchstart="touchstart(49)" ontouchend="touchend(49)">\u21bb</button>\n<button id=k_camright class=hidden ontouchstart="touchstart(51)" ontouchend="touchend(51)">\u21ba</button>\n</center>\n<center id=text style=\'font:5vh arial,sans-serif;color:#fff;position:fixed;bottom:9vh;left:0;width:100vw\'></center>';
u.lossst_appleappearedhub0=1;ja();u.lossst_wasd&&(k_up.className=k_down.className=k_left.className=k_right.className="");u.lossst_backtrack&&(k_backtrack.className="");u.lossst_reset&&(k_reset.className="");u.lossst_topbottom&&(k_top.className="",k_bottom.className="");u.lossst_camera&&(k_camleft.className="",k_camright.className="");setInterval("L[P+'time']=++ocd_time;document.title='LOSSST: '+ocd_moves+'m, '+ocd_time+'s'",1E3);k&&(b.innerHTML+="<div style='position:fixed;font:8vh a;top:3vh;right:3vh' onclick=location=location>\u00d7</div>")}
function aa(){var A=snake;L&&!R&&(A=snake2);A.innerHTML="";m=[];n=[];q=[];C=[];R&&(v=32/t);e=D-1;if("load"==w)for(i=0;i<D;i++)m[e-i]=1-i,n[e-i]=10,q[e-i]=0,C[e-i]=-Math.PI/2;else if(R)for(i=0;i<D;i++)m[e-i]=-i-1,n[e-i]=~~(t/2),q[e-i]=0,C[e-i]=-Math.PI/2;else if(u.lossst_snakex){var k=+u.lossst_snakex,g=+u.lossst_snakey,f=+u.lossst_snakez;"hub"==w&&2>m&&(f=u.lossst_snakez=1);if("2-5"==w&&ca&&1==L)for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i-1,C[e-i]=0;else if(2>k)for(i=0;i<D;i++)m[e-i]=k-i,n[e-i]=
g,q[e-i]=f,C[e-i]=-Math.PI/2;else if(k>M-2)for(i=0;i<D;i++)m[e-i]=k+i,n[e-i]=g,q[e-i]=f,C[e-i]=Math.PI/2;else if(2>g)for(i=0;i<D;i++)m[e-i]=k,n[e-i]=g-i,q[e-i]=f,C[e-i]=0;else if(g>h-2)for(i=0;i<D;i++)m[e-i]=k,n[e-i]=g+i,q[e-i]=f,C[e-i]=0;else for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i,C[e-i]=0}else if("hub"==b.className)for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i-1,C[e-i]=0;for(i=0;i<Math.max(D+4,16);i++)A.innerHTML+="<div id=snakecubemove"+i+' class=snakecubemove style="transform:translateX(50vh)translateY(50vh)translateZ(-30vh);width:'+
(v-1)+"vh;height:"+(v-1)+'vh"><div class=snakeshadow id=snakeshadow'+i+"></div><div id=snakecuberotate"+i+' class=snakecuberotate><div class="cube snake" id=snakecube'+i+">"+(1>i?"<div class=tongue>Y</div>":"")+"<div class=front>"+(1>i?"\u203f":"")+'</div><div class=up style="font-size:'+.5*v+"vh;line-height:"+.8*v+'vh">'+(1>i?"\ud83d\udc40":"")+"</div><div class=right></div><div class=left></div><div class=back>"}function ja(){-1<navigator.userAgent.indexOf("Macintosh")&&(perspective.className="mac");
-1<navigator.userAgent.indexOf("Firefox")&&(perspective.className="fx");S&&(perspective.className="mobile");b.className=w;L&&!R&&(snake.innerHTML="");if("load"==w)h=M=20,I=[],E=[],z=[],y=[],g=[eval("["+location.hash.slice(1).replace(/[01]{2,}/g,'"$&"')+"]")],D=g[0][1],g[0][5]=g[0][6]=8,L=!!g[0][3],x=[["Controls:<br>Move: arrow keys<br>"+(L?"Up/Down: Shift/Ctrl<br>":"")+"backtrack: Alt<br>Reset: R",1,5,1,0,L,0]],u.lossst_puzzleload0&&delete u.lossst_puzzleload0,u.lossst_doorload0=1;else if("hub"==
w){M=40;h=20;I=[[13,9,0],[7,13,0],[35,8,0]];E=[[11,11,0,0,0],[2,12,0,6,0],[38,10,0,7,0]];z=[[41,10,Math.PI/2,8,0,"1-1",1,0,10,0,0],[20,-2,0,14,0,"2-1",1,10,19,0,0],[-2,11,-Math.PI/2,6,0,"3-1",1,14,5,1,1],[28,21,Math.PI,14,0,"1-4",1,22,1,0,0],[5,21,Math.PI,5,0,"2-5",1,36,1,0,1]];g=[];y=[];for(e=9;15>e;e++)for(m=0;5>m;m++)2==m&&14==e||2==m&&13==e||3==m&&13==e||3==m&&12==e||2==m&&12==e||y.push([m,e]);x=[["Move with<br>arrow keys"+(S?"":" or WASD/ZQSD"),19,5,0,13,0],["Use the "+(S?"\u21a9":"Alt")+" key to backtrack",
1,9,0,13,0,1],["Doors indicate the snake size required to open them",35,14,0,13,0],["2D puzzle editor<br>\u2193",18,8,14,0,0],["\u2191<br>New puzzles!",22,3,14,0,0],["New ! Puzzle editor with wraps<br>\u2193",19,8,6,7,1],["\u2190<br>New puzzles!",1,9,6,7,1,1],["Full puzzle editor (2D, 3D & wraps!)<br>\u2193",19,8,7,0,1]];J=[["\ud83d\udc3f\ufe0f",37,7]]}else if("1-1"==w)M=40,h=20,I=[[35,15,0]],E=[[33,16,0,0,6],[34,17,0,0,6],[37,15,0,0,6]],y=[],z=[[-2,10,-Math.PI/2,8,0,"hub",0,39,11,0,0],[35,21,Math.PI,
11,0,"1-3",1,35,1,0,0]],g=[[6,8,0,,"000000001000001110001110001000000000",2,3],[6,8,0,,"000000011000011100010000011000000000",14,3],[6,8,0,,"000000000100001100011000011100000000",26,3],[5,8,0,,"0000001110011100110000000",2,13],[6,8,0,,"000000011000011000001100001100000000",14,13],[6,8,0,,"000000000100001100001110001100000000",26,13]],x=[["Cover the black shapes to solve puzzles",9,9,1,0],["Solve all the puzzles in the room to get new apples and open a new door",21,9,1,0],["Your progress is saved automatically",
34,9,1,0]],J=[["\ud83d\udc0c",11,10]];else if("1-3"==w)S&&(k_reset.className="",u.lossst_reset=1),M=40,h=20,I=[[4,7,0]],E=[[2,8,0,0,12],[3,9,0,0,12]],z=[[35,-2,0,8,0,"1-1",0,35,19,0,0],[-2,10,-Math.PI/2,13,0,"1-4",1,39,10,0,0]],g=[[6,11,0,,"000000011110011010011110000000000000",8,2],[7,11,0,,"0000000001110000111000001100000110000010000000000",18,2],[6,11,0,,"000000011000011110001010001110000000",28,2],[6,11,0,,"000000011100001110001110001100000000",8,12],[6,11,0,,"000000001110001110001110001010000000",
18,12],[6,11,0,,"000000011110011110001100001000000000",28,12]],x=[["If you get stuck, "+(S?"click \u00d7":"press R")+" to exit a puzzle",35,11,1,0],["If a puzzle looks impossible, try another entry!",14,10,1,0]],y=[[11,4],[21,16]],J=[["\ud83d\udc08",4,14]];else if("1-4"==w)M=40,h=20,I=[[35,8,0]],E=[[34,11,0,0,18]],z=[[41,10,Math.PI/2,8,0,"1-3",0,1,10,0,0],[22,-2,0,14,0,"hub",1,28,19,0,0]],g=[[7,13,0,,"0000000000000001111000111100001111000100000000000",2,3],[7,13,0,,"0000000001110000101000011100001110000110000000000",
14,3],[6,13,0,,"000000001110011110011010001110000000",26,4],[7,13,0,,"0000000001100000111000011100001110000110000000000",2,12],[7,13,0,,"0000000000000001111100101010011111000000000000000",14,12],[6,13,0,,"000000011000011100011110011110000000",26,12]],x=[["\u2191<br>After this room, go north to test a puzzle editor and a new kind of puzzles!",22,11,13,0,0]],y=[[17,5],[18,8],[29,7],[27,5],[27,8],[29,13],[30,13],[30,14],[18,15],[16,15],[6,13],[6,17],[7,8],[6,8],[5,8],[3,7],[3,8],[7,6],[7,5]],J=[["\ud83e\udd8b<br><br>",
29,13]];else if("2-1"==w){h=M=20;I=[[10,2,0]];E=[];z=[[10,21,Math.PI,14,0,"hub",0,20,0,0,0],[-2,5,-Math.PI/2,14,0,"2-15",0,24,12,0,0]];g=[[7,14,1,,"0100010011111000000000000000000000001111100100010",7,7]];x=[["Now you're thinking with wraps!",2,2,0,14,0]];y=[];for(e=0;20>e;e++)y.push([e,10]);J=[["\ud83d\udc10",12,2]]}else"2-15"==w?(h=M=25,I=[[5,12,0]],E=[[4,14,0,0,23]],z=[[26,12,Math.PI/2,14,0,"2-1",0,0,5,0,0],[-2,12,-Math.PI/2,15,0,"2-2",1,79,5,0,0]],g=[[7,14,1,,"1000001000000000000000010100011011011000111000001",
15,3],[6,14,1,,"110011100001000000100001100001110011",15,17],[5,14,1,,"1100111001100011001110011",3,3],[6,14,1,,"000011000011110001110001000011000011",3,17]],x=[["Reminder:<br>use "+(S?"\u21a9":"Alt")+" to backtrack,<br>"+(S?"\u00d7":"R")+" to exit a puzzle.",11,12,1,0,0]],y=[],J=[["\ud83d\udc12",12,20]]):"2-2"==w?(M=80,h=20,I=[[35,10,0]],E=[[38,11,0,0,35]],z=[[81,5,Math.PI/2,15,0,"2-15",0,0,12,0,0],[-2,15,-Math.PI/2,16,0,"2-3",1,19,5,0,0]],g=[[5,5,1,,"0111101001010110100011111",59,13],[5,5,1,,"1111011000111100001011110",
48,13],[5,5,1,,"1111101000011110111001100",37,13],[5,5,1,,"1111110000111001000011111",26,13],[5,5,1,,"1100101101001110011101101",15,13],[5,5,1,,"1111100001110010000111111",59,2],[5,5,1,,"1000110111100011000111111",48,2],[5,5,1,,"1000110101101011111110001",37,2],[5,5,1,,"1111110001000110000111111",26,2],[5,5,1,,"0111101100011100011011110",15,2],[5,5,1,,"1111101111001110001100001",4,8],[5,5,1,,"1010100101111010000111111",71,8]],x=[["This room hides a surprise!",72,2,0,15,0]],y=[],J=[]):"2-3"==w?(M=
20,h=30,I=[[5,25,0]],E=[[4,24,0,0,37],[7,25,0,0,37],[2,26,0,0,37],[3,28,0,0,37]],z=[[10,31,Math.PI,16,0,"2-4",1,10,1,0,0],[21,5,Math.PI/2,16,0,"2-2",0,1,15,0,0]],g=[[6,16,1,,"001000011000011100111111001110001000",7,6],[6,16,1,,"110001100001000111000111100001110001",7,18]],x=[],y=[],J=[["\ud83d\udc01",9,14]]):"2-4"==w?(M=20,h=30,I=[[16,22]],E=[[18,22,0,0,39]],z=[[10,-2,0,20,0,"2-3",0,10,29,0,0],[21,25,Math.PI/2,21,0,"2-5",1,1,10,0,0]],g=[[6,16,1,,"001000011110111111011110011110001000",7,6],[6,16,1,
,"110001100001000011000111001111111111",7,18]],x=[],y=[],J=[["\ud83e\udd86",9,14]]):"2-5"==w?(M=40,h=20,I=[],E=[[38,2,0,5,0]],z=[[-2,10,-Math.PI/2,1,0,"2-4",0,19,25,0,0],[36,-2,0,6,0,"hub",1,5,19,0,1]],g=[],x=[["Guess what, you finished the first half of the game!",5,9,1,0],["Little snake can move up and down with "+(S?"\u2b06\ufe0e and \u2b07\ufe0e":"Shift and Ctrl keys")+", and open black doors",30,9,1,0]],y=[[31,0],[31,1],[31,2],[31,3],[31,4],[31,5],[31,6],[32,6],[33,6],[34,6],[35,6],[36,6],[37,
6],[38,6],[39,6]],J=[["\ud83d\udc22",13,14]]):"3-1"==w?(M=15,h=70,I=[[2,62]],E=[[2,65,0,0,47],[1,66,0,0,47]],z=[[16,5,Math.PI/2,6,0,"hub",0,1,11,0,1],[-2,65,-Math.PI/2,8,0,"3-3",1,19,65,0,1]],g=[[5,5,0,"0000000000000000000001110",,2,2],[4,5,0,"0000000001000110",,4,11],[5,5,0,"0000000000000000101001110",,6,20],[5,5,0,"0000000000000000111000100",,8,29],[4,5,0,"0000000001100110","0000011001100000",2,38],[4,5,0,"0000010001100100","0000011001100000",4,47],[4,5,0,"0000011001000100","0000010001100000",6,
56],[4,5,0,"0000000001100110","0100011000100000",8,65]],x=[["You now have to match the patterns on the walls...",10,2,1,0,1],["... and on the floor too!",10,40,1,0,1]],y=[],J=[["\ud83e\udd89",10,14]]):"3-3"==w?(S&&(k_camleft.className=k_camright.className="",u.lossst_camera=1),M=20,h=75,I=[[2,2]],E=[[1,4,0,0,59],[2,5,0,0,59],[3,6,0,0,59],[4,2,0,0,59]],z=[[21,65,Math.PI/2,7,0,"3-1",0,1,65,0,1],[-2,5,-Math.PI/2,12,0,"3-6",1,14,5,0,1]],g=[[5,5,0,"0000000000010000110001110",,8,69],[6,5,0,"000000000000000000000100001110011000",
,12,58],[5,5,0,"0000000000010000111001000",,2,58],[4,5,0,"0000001001100110","0000001001100000",2,45],[5,5,0,"0000000000000000010001110","0000000100001100110000000",12,45],[5,5,0,"0000000000000000101001110","0000001110010100000000000",2,34],[5,5,0,"0000000000000000011001100","0000001110011000010000000",12,34],[4,5,1,"0000011001100110","0110000000000110",2,22],[4,5,1,"1001000000001001","1001000000001001",12,22],[4,5,1,"0000010011110010","0000111101100000",2,12],[4,5,1,"0110010000000011","0000011100110000",
12,12],[4,5,1,"1101000000000001","1101000000010001",12,2]],x=[["You can rotate the camera with "+(S?"<br>\u21bb and \u21ba":"the keys 1, 2 and 3"),15,68,1,0,1],["Can you imagine what's coming next?",7,54,1,0,1],["Yep... 3D puzzles with wrap! Use "+(S?"\u2b06\ufe0e and \u2b07\ufe0e":"Shift and Ctrl")+" to wrap between top and bottom",7,24,1,0,1]],y=[],J=[["\ud83d\udc1e",3,70]]):"3-6"==w?(M=15,h=80,I=[[2,70]],E=[[1,73,0,0,68],[3,75,0,0,68]],z=[[16,5,Math.PI/2,12,0,"3-3",0,1,5,0,1],[-2,75,-Math.PI/2,
14,0,"3-7",1,14,25,0,1]],g=[[5,5,0,"0000000000001001111100100",,2,2],[4,5,0,"0000010001100000",,5,11],[5,5,0,"0000000110000110111000010",,8,20],[5,5,0,"0000000000001000111011111","0000000000111001111100000",2,29],[4,5,0,"1000110011101111","0000001111110000",5,38],[4,5,0,"0000100011001110","1110110010000000",8,45],[4,5,1,"1000100110010001","0000100110010000",2,54],[4,12,1,"0000001011110100","0000110011110011",5,63],[5,12,1,"0100011000010000111001000","0000001110110000100000000",8,72]],x=[],y=[[6,12]],
J=[["\ud83d\udc1d",3,20]]):"3-7"==w?(M=15,h=30,I=[[10,12]],E=[[8,11,0,0,71],[9,10,0,0,71],[10,9,0,0,71],[11,10,0,0,71],[12,11,0,0,71],[13,12,0,0,71]],z=[[16,25,Math.PI/2,14,0,"3-6",0,1,75,0,1],[-2,5,-Math.PI/2,20,0,"3-8",1,14,5,0,1]],g=[[5,14,1,"0001100110011001100010000","0001100110011001100010000",2,24],[5,5,1,"1100010001000011000111000","0000011000110010000000000",4,13],[5,5,1,"1101110001000001000011000","1100010000000001000111011",6,2]],x=[],y=[],J=[["\ud83d\udc13",1,14]]):"3-8"==w&&(M=15,h=48,
I=[[10,44]],E=[[7,45,0,0,75]],z=[[16,5,Math.PI/2,20,0,"3-7",0,1,5,0,1]],g=[[4,20,1,"0000111101101111","1000111111111000",5,38],[4,20,1,"1111001001001111","1111101010101111",5,28],[4,20,1,"1111010101011101","0001101101101111",5,18],[4,20,1,"1111000100011110","1111110110011111",5,8]],x=[],y=[],J=[["\ud83d\udc09",13,46]]);scene.style.width=M*v+"vh";scene.style.height=h*v+"vh";objects.innerHTML="";puzzle.innerHTML="";for(var e in I)objects.innerHTML+="<div id=tree"+e+' class="emoji tree" style="left:'+
I[e][0]*v+"vh;transform:translateX(-9vh)translateY("+(I[e][1]*v+4)+'vh)rotateX(-75deg)">\ud83c\udf33</div><div id=treeshadow'+e+' class="emojishadow treeshadow" style="left:'+I[e][0]*v+"vh;transform:translateX(-9vh)translateY("+(I[e][1]*v+4)+'vh)rotateZ(144deg)scaleY(1.5)">\ud83c\udf33';for(e in E)u["lossst_appleeaten"+w+e]?delete E[e]:objects.innerHTML+="<div id=apple"+e+' class="emoji apple '+(u["lossst_appleappeared"+w+e]?"":"hidden")+'" style="left:'+E[e][0]*v+"vh;transform:translateY("+(E[e][1]*
v+4)+'vh) rotateX(-65deg)">'+("3-8"==w?"<div>\u26bd</div>":"<div class=emojimove>\ud83c\udf4e</div>")+"</div><div id=appleshadow"+e+' class="emojishadow appleshadow '+(u["lossst_appleappeared"+w+e]?"":"hidden")+'" style="left:'+E[e][0]*v+"vh;transform:scaleX(-1)translateY("+(E[e][1]*v+3)+'vh)rotateZ(212deg)">'+("3-8"==w?"\u26bd":"\ud83c\udf4e");for(e in J)objects.innerHTML+='<div class="emoji animal" style="left:'+J[e][1]*v+"vh;transform:translateY("+(J[e][2]*v+4)+'vh) rotateX(-65deg)"><div class=emojimove>'+
J[e][0]+'</div></div><div class="emojishadow animalshadow" style="left:'+J[e][1]*v+"vh;transform:scaleX(-1)translateY("+(J[e][2]*v+3)+'vh)rotateZ(212deg)">'+J[e][0];for(e in z)objects.innerHTML+="<div id=door"+(""+w+e)+' class="door'+(u["lossst_door"+w+e]?" open":"")+'" style="left:'+(z[e][0]+.5)*v+"vh;top:"+(z[e][1]+.5)*v+"vh;transform:rotateZ("+z[e][2]+"rad)translateZ("+z[e][9]*v+'vh)"><div class="realdoor door'+z[e][10]+'" '+(z[e][6]?"":"hidden")+">"+z[e][3]+"</div><div class=path>";for(var k in g)for(var m in y)u["lossst_puzzle"+
w+k]&&y[m][0]>=g[k][5]&&y[m][0]<g[k][5]+g[k][0]&&y[m][1]>=g[k][6]&&y[m][1]<g[k][6]+g[k][0]&&delete y[m];for(e in y)objects.innerHTML+="<div id=cube"+e+' class="cube rock" style="left:'+y[e][0]*v+"vh;top:"+y[e][1]*v+'vh;width:7.2vh;height:7.2vh"><div class=front></div><div class=up style="background-position:'+(-300-y[e][0]*v)+"vh "+(-140-y[e][1]*v)+'vh"></div><div class=right></div><div class=left>';for(e in x)L^x[e][5]||!(x[e][3]&&x[e][3]<=D||x[e][4]&&x[e][4]>=D)||(objects.innerHTML+="<div id=hint"+
(""+w+e)+' class="hint" style="left:'+(x[e][1]*v+1)+"vh;transform:translateY("+(x[e][2]*v+4)+"vh)translateZ("+(x[e][6]*v||0)+'vh)rotateX(-70deg)translateY(-4vh)">'+x[e][0]);for(k in g){t=g[k][0];var f="",n="";puzzle.innerHTML+="<div id=puzzle"+k+' class="cube wrap visible '+(g[k][2]&&!u["lossst_puzzle"+w+k]?"wrapvisible":"")+'" style="left:'+g[k][5]*v+"vh;top:"+g[k][6]*v+"vh;width:"+g[k][0]*v+"vh;height:"+t*v+'vh">'+(g[k][2]?"<div class=left></div><div class=right></div>":"")+"<div id=down"+k+" class=down></div><div id=back"+
k+" class=back></div>"+(g[k][2]?"<div class=front>":"");var q="000",C="fff";u["lossst_puzzle"+w+k]&&(q="44c",C="fd0");for(e=0;e<t;e++)for(m=0;m<t;m++)g[k][3]&&(f+="<div class=cell id=w"+k+"-"+e+"-"+m+" style='width:"+v+"vh;height:"+v+"vh;background:#"+("1"==g[k][3][e*t+m]?q:C)+"'></div>"),g[k][4]&&(n+="<div class=cell id=g"+k+"-"+e+"-"+m+" style='width:"+v+"vh;height:"+v+"vh;background:#"+("1"==g[k][4][e*t+m]?q:C)+"'></div>");self["down"+k]&&(self["down"+k].innerHTML+=n);self["back"+k]&&(self["back"+
k].innerHTML+=f)}"3-8"==w&&(objects.innerHTML+="<div style='position:fixed;transform:rotateZ(-90deg)translateX(-113vh)translateY(22vh)translateZ(317vh);font:30vh/30vh a'>THE<br><br>END");"hub"!=w||u.lossst_snakex?(scene.style.transition="transform .8s, transform-origin .8s linear",aa()):(U=1,setTimeout('resetsnake();movesnake();snakecubemove0.style.transition="transform .5s"',2E3),setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",
4500),setTimeout("snakecubemove0.style.transition='';snakeshadow0.style.transition=snakecuberotate0.style.transition='transform .2s';snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+-Math.PI/4+"rad)'",5E3),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+Math.PI/4+"rad)'",5500),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='';",6E3),setTimeout("b.innerHTML+=`<div style='position:fixed;font:8vh a;top:3vh;right:3vh' onclick=location=location>\u00d7</div>`;scene.style.transition='transform .8s, transform-origin .8s linear';snakeshadow0.style.transition=snakecuberotate0.style.transition='';lock=0;L[P+'snakex']=20;L[P+'snakey']=10;if(mobile){k_up.className=k_down.className=k_left.className=k_right.className='';L[P+'wasd']=1}",
9E3));movesnake()}function da(A){scene.style.transform="translateX(-"+m[e]*v+"vh)translateY(-"+n[e]*v+"vh)translateZ(15vh)rotateX(40deg)rotateZ("+A+"rad)"}var u=localStorage,ca=0,L=+u.lossst_son||0,S=+u.lossst_mobile||0,ea=+u.lossst_time||0,ba=+u.lossst_moves||0,v=7,e=0,m=[],n=[],q=[],C=[],D=u.lossst_snakelength=+u.lossst_snakelength||5,R=0,W=1,fa=r=d=l=s=c=B=0,U=0,I=[],E=[],z=[],y=[],x=[],J=[],g=[],K=null,N="e",O=[],P=[],Z=0,X=0,V=0,Q=0,F=0,G=0,t=0,ha=+u.lossst_totalsolved||0,Y=0,T=0,H=0,w="",M=
h=0;editor=function(){Q=L=0;share.disabled=1;u.lossst_editorfull||u.lossst_son&&6<u.lossst_snakelength||(ground.style.opacity=groundlabel.style.opacity=0,ground.style.position=groundlabel.style.position="fixed",ground.style.top=groundlabel.style.top="-9vh");K=0;R=1;g=[[5,5,0,0,0,0,0]];gridsize.value=snakesize.value=D=5;ground.checked=!0;Z=1;self.a&&(wall.checked=!1);self.b&&(wrap.checked=!1);ground.onclick=function(){ground.checked?Z=1:self.a&&(Z=0,X=1,wall.checked=!0)};self.a&&(wall.onclick=function(){self.a&&
wall.checked?(X=1,L=g[0][3]=1):(X=L=0,Z=1,ground.checked=!0,g[0][3]=0)});self.b&&(wrap.onclick=function(){V=g[0][2]=wrap.checked||0});P=[];O=[];snakesize.onchange=snakesize.oninput=function(){snakeval.innerHTML=D=+snakesize.value;aa();movesnake();Q=0;share.disabled=1;for(i=0;i<t;i++)for(j=0;j<t;j++)self["ge-"+i+"-"+j].style.background=O[i][j]?"#000":"#fff",self["we-"+i+"-"+j].style.background=P[i][j]?"#000":"#fff"};t=5;(reset.onclick=gridsize.onchange=gridsize.oninput=resizegrid=function(){Q=0;share.disabled=
1;gridval.innerHTML=t=+gridsize.value;g[0][0]=t;var e=100/t;down.innerHTML="";ghtml=whtml=back.innerHTML="";P=[];O=[];for(i=0;i<t;i++)for(P[i]=[],O[i]=[],j=0;j<t;j++)P[i][j]=0,O[i][j]=0;for(i=0;i<t;i++)for(j=0;j<t;j++)whtml+="<div class=cell id=w"+N+"-"+i+"-"+j+" style='width:"+e+"%;padding-top:"+e+"%' onmousedown='paint("+i+","+j+",this,0)' onmousemove='paint("+i+","+j+",this,0,1)'></div>",ghtml+="<div class=cell id=g"+N+"-"+i+"-"+j+" style='width:"+e+"%;padding-top:"+e+"%' onmousedown='paint("+
i+","+j+",this,1)' onmousemove='paint("+i+","+j+",this,1,1)'></div>";down.innerHTML+=ghtml;back.innerHTML+=whtml;aa();movesnake()})();paint=function(e,k,m,f,g){if(!W&&(mousedown&&(Q=0,share.disabled=1),m=f?O:P,g&&mousedown?m[e][k]=1:g||(m[e][k]^=1),!g||mousedown))for(e=0;e<t;e++)for(k=0;k<t;k++)self["ge-"+e+"-"+k].style.background=O[e][k]?"#000":"#fff",self["we-"+e+"-"+k].style.background=P[e][k]?"#000":"#fff"};print=function(e){var k="";for(i in e)for(j in e[i])k+=e[i][j];return k};share.onclick=
function(){var e=[];e.push(t);e.push(snakesize.value);e.push(self.b&&wrap.checked?1:0);e.push(self.a&&wall.checked?print(P):"");e.push(ground.checked?print(O):"");window.open("https://twitter.com/intent/tweet?text=I%20made%20a%20level%20for%20LOSSST,%20a%20%23js13k%20game%20by%20by%20@MaximeEuziere!%0Ahttp%3A%2F%2Fjs13kgames.com%2Fentries%2Flossst/index.html%23"+e)};mousedown=0;onmousedown=function(){mousedown=1};onmouseup=function(){mousedown=0};ondragstart=function(e){e.preventDefault()};W=0;test.onclick=
function(){W=1;b.className="editor playing";Q=0;share.disabled=1;for(i=0;i<t;i++)for(j=0;j<t;j++)self["ge-"+i+"-"+j].style.background=O[i][j]?"#000":"#fff",self["we-"+i+"-"+j].style.background=P[i][j]?"#000":"#fff"};quit.onclick=function(){W?(W=0,b.className="editor",aa(),movesnake(),checkgrid()):location="index.html"};scene.style.transform="rotateX(38deg)translateX(-18vh)"};mainmenu=function(){1<location.hash.length?ia("load"):(b.innerHTML="\n<center id=e>\ud83d\udc40</center>\n<center id=itext></center>\n<div id=perspective style=perspective:30vh>\n<center id=menu>\n<h1>LOSSST</h1><span onclick=a()>New game</span><br>"+
(u.lossst_start?(u.lossst_ended?"":"<span onclick=index(0,1)>Continue</span><br>")+"<span onclick=location='editor.html'>Puzzle editor</span><br>":"")+"<span onclick=\"location='//twitter.com/search?q=%23LOSSSTjs13k'\">Twitter levels</span><br><span onclick=location='//maximeeuziere.itch.io'>Other games</span>\n</center>\n</div>",a=function(){for(i in localStorage)0==i.indexOf("lossst")&&-1==i.indexOf("editorfull")&&delete localStorage[i];u.lossst_start=1;menu.innerHTML="<br><br><span onclick=intro(0)>Desssktop</span><br><br><span onclick=intro(1)>Mobile</span>"},
intro=function(e){u.lossst_mobile=S=e;u.lossst_snakelength=D=5;ea=u.lossst_time=0;ba=u.lossst_moves=0;u.lossst_moves=0;u.lossst_time=0;menu.innerHTML="";setTimeout("e.style.margin=0",500);dir=1;inter=setInterval("e.style.opacity=0;setTimeout('e.style.opacity=1;dir=-dir;e.style.transform=`scaleX(`+dir+`)`',150)",3E3);setTimeout("itext.innerHTML=`I lossst my kid!`",2E3);setTimeout("itext.innerHTML=``",5E3);setTimeout("clearInterval(inter);e.style.margin='-80vh 0 0'",7E3);setTimeout(ia,7500)})};movesnake=
function(A){for(f=0;f<D;f++){if(!A){var k=oldx=oldy=oldz=newx=newy=newz=0;V&&t&&(m[e-f-1]==F&&m[e-f]==F+t-1?(k=1,oldx=F-1,newx=F+t,oldy=newy=n[e-f],oldz=newz=q[e-f]):m[e-f-1]==F+t-1&&m[e-f]==F?(k=1,oldx=F+t,newx=F-1,oldy=newy=n[e-f],oldz=newz=q[e-f]):n[e-f-1]==G&&n[e-f]==G+t-1?(k=1,oldy=G-1,newy=G+t,oldx=newx=m[e-f],oldz=newz=q[e-f]):n[e-f-1]==G+t-1&&n[e-f]==G?(k=1,oldy=G+t,newy=G-1,oldx=newx=m[e-f],oldz=newz=q[e-f]):0==q[e-f-1]&&q[e-f]==t-1?(k=1,oldz=-1,newz=t,oldx=newx=m[e-f],oldy=newy=n[e-f]):
q[e-f-1]==t-1&&0==q[e-f]&&(k=1,oldz=t,newz=-1,oldx=newx=m[e-f],oldy=newy=n[e-f]));if(k)self["snakecuberotate"+f].style.transform="rotateZ("+C[e-f]+"rad)",self["snakecubemove"+f].style.transform="translateX("+(oldx*v+.5)+"vh)translateY("+(oldy*v+.5)+"vh)translateZ("+(oldz*v+.5)+"vh)scale(.01)scaleZ(.01)",setTimeout("snakecubemove"+f+".style.transition='none'",150),setTimeout("snakecubemove"+f+".style.transform=`translateX(${"+newx+"*sidesize+.5}vh)translateY(${"+newy+"*sidesize+.5}vh)translateZ(${"+
newz+"*sidesize+.5}vh)scale(.01)`",175),setTimeout("snakecubemove"+f+".style.transition='';snakecubemove"+f+".style.transform=`translateX(${snakex["+(e-f)+"]*sidesize+.5}vh)translateY(${snakey["+(e-f)+"]*sidesize+.5}vh)translateZ(${snakez["+(e-f)+"]*sidesize+.5}vh)`",200);else try{self["snakecubemove"+f].style.transform="translateX("+(m[e-f]*v+.5)+"vh)translateY("+(n[e-f]*v+.5)+"vh)translateZ("+(q[e-f]*v+.9)+"vh)",self["snakecuberotate"+f].style.transform="rotateZ("+C[e-f]+"rad)"}catch(ka){}try{self["snakeshadow"+
f].style.display=0==q[e-f]?"":"none"}catch(ka){}}R||"undefined"===typeof scene||(null===K||u["lossst_puzzle"+w+K]?(scene.style.transform="translateX("+-m[e]*v+"vh)translateY("+-n[e]*v+"vh)translateZ(15vh)rotateX(40deg)",scene.style.transformOrigin=""+m[e]*v+"vh "+n[e]*v+"vh"):(scene.style.transform="translateX("+(-(F+g[K][0]/2)*v+5)+"vh)translateY("+(-(G+g[K][0]/2)*v+8)+"vh)translateZ("+(60-g[K][0]*(v+3))+"vh)rotateX(30deg)",scene.style.transformOrigin=""+((F+g[K][0]/2)*v+5)+"vh "+((G+g[K][0]/2-1)*
v+8)+"vh"))}A=L?1:0;for(f=0;f<D;f++){if(0>=q[e-f]){A=0;break}for(x in y)y[x][0]==m[e-f]&&y[x][1]==n[e-f]&&1==q[e-f]&&(A=0)}if(A){for(f=0;f<D;f++)q[e-f]--;try{movesnake()}catch(ka){for(var x=2*D;x--;)m.pop(),n.pop(),q.pop(),C.pop(),e--;Y=0;movesnake()}}A=m[e];k=n[e];for(var f in z)(z[f][10]&&L||!z[f][10]&&!L)&&self["door"+w+f]&&0<z[f][3]&&D>=z[f][3]&&4>Math.hypot(A-z[f][0],k-z[f][1])&&(self["door"+w+f].className="door open",u["lossst_door"+w+f]=1),self["door"+w+f]&&"door open"==self["door"+w+f].className&&
2>Math.hypot(A-z[f][0],k-z[f][1])&&("load"==w?setTimeout('location="index.html"',600):(u.lossst_page=w=z[f][5],setTimeout(ja,600),u.lossst_snakex=z[f][7],u.lossst_snakey=z[f][8],u.lossst_snakez=0,u.lossst_snakeangle=C[e]));if(!R)for(p in null!==K&&checkgrid(),K=null,O=[],P=[],g)if(A>=g[p][5]&&A<g[p][5]+g[p][0]&&k>=g[p][6]&&k<g[p][6]+g[p][0]){K=+p;Q=0;u["lossst_puzzle"+w+p]&&(Q=1);N=p;Z=!!g[p][4];X=!!g[p][3];V=!!g[p][2];F=g[p][5];G=g[p][6];t=g[p][0];for(f=0;f<t;f++)for(O[f]=[],P[f]=[],x=0;x<t;x++)g[p][3]&&
(P[f][x]=+g[p][3][f*g[p][0]+x]),g[p][4]&&(O[f][x]=+g[p][4][f*g[p][0]+x]);checkgrid()}};checkmove=function(A,k,v){H=0;if(R&&W){if(-5>A||A>t+3||-2>k||k>t)H=1}else if(0>A||A>=M||0>k||k>=h)H=1;for(var f in I)A>=I[f][0]-1&&A<=I[f][0]&&k==I[f][1]&&(H=1);for(f in x)A>=x[f][1]&&A<=x[f][1]+3&&k==x[f][2]&&D>=x[f][3]&&(!x[f][4]||D<=x[f][4])&&(L&&x[f][5]||!L&&!x[f][5])&&(H=1);for(f in E)if(u["lossst_appleappeared"+w+f]&&A==E[f][0]&&k==E[f][1])if("3-8"==w){U=1;setTimeout("move_scene(Math.PI/2);appleshadow0.remove();apple0.style.transform='translateY(319vh)translateZ(2vh)rotateX(-65deg)rotateY(90deg)';apple0.style.transition=scene.style.transition='10s';apple0.style.transform='translateY(15vh)translateZ(2vh)rotateX(-65deg)';scene.style.transform='translateX(-207vh)translateY(-320vh)translateZ(-300vh)rotateX(0deg)rotateZ(1.5708rad)'",
200);for(f in g)setTimeout("back"+f+".style.transition='.5s';back"+f+".style.transform='translateY(-125%)'",[1450,2500,3900,5500][f]);setTimeout("clearInterval(int_time);L[P+'ended']=1;L[P+'editorfull']=1;b.style.background='#000';b.innerHTML='<div id=perspective style=perspective:90vh><center id=menu style=width:75vh;transform:translateX(-38vh)translateY(-47vh)rotateX(31deg)><span style=font-size:4vh;line-height:5vh><h1>Congrats!</h1><br>You completed the game in<br>'+ocd_time+' seconds and '+ocd_moves+' moves!<br><br><a href=https://twitter.com/intent/tweet?text=I%20played%20LOSSST,%20a%20%23js13k%20game%20by%20by%20@MaximeEuziere%0Amy%20score:%20'+ocd_time+'%20seconds%20and%20'+ocd_moves+'%20moves!%0Ahttp%3A%2F%2Fjs13kgames.com%2Fentries%2Flossst target=_blank style=color:#def;font-size:4vh>TWEET YOUR SCORE</a><br><br>Dev record:<br>1786 seconds, 3461 moves<br><br>You can now create 3D puzzles<br>in the editor!<br><br><a href=index.html style=font-size:4vh>RETURN TO TITLE SCREEN</a>'",
15E3)}else delete E[f],self["apple"+f].remove(),self["appleshadow"+f].remove(),D++,u.lossst_snakelength=D,u["lossst_appleeaten"+w+f]=1,"2-2"==w&&16==D&&(ca=U=1,scene.style.transition="5s",scene.style.transform="translateX(-256vh)translateY(-95vh)translateZ(-400vh)rotateX(0deg)rotateZ(180deg)",setTimeout("scene.style.transition='.8s';lock=easteregg=0;movesnake()",1E4));for(f in y)A==y[f][0]&&k==y[f][1]&&0==v&&(H=1);for(f in J)"1-4"!=w&&A==J[f][1]&&k==J[f][2]&&0==v&&(H=1);for(f in z)self["door"+w+f]&&
"door open"==self["door"+w+f].className&&2>=Math.hypot(A-z[f][0],k-z[f][1])&&(H=0);for(f=D-2;0<f;f--)m[e-f]==A&&n[e-f]==k&&q[e-f]==v&&(H=1);for(p in g)g[p][3]&&A>=g[p][5]&&A<g[p][5]+g[p][0]&&(k==g[p][6]-1&&n[e]==g[p][6]&&!g[p][2]||k==g[p][6]&&n[e]==g[p][6]-1)&&(H=1);if("2-5"==w&&18==A&&!L){ca=L=U=H=1;u.lossst_son=1;u.lossst_snakelength=D=5;for(f=0;21>f;f++)y.push([m[e-f],n[e-f]]),self["snakecubemove"+f].id="",self["snakecuberotate"+f].id="",self["snakeshadow"+f].id="",self["snakecube"+f].id="";scene.style.transition=
"2s";aa();movesnake();scene.style.transform="translateX(-142vh)translateY(-70vh)translateZ(80vh)rotateX(45deg)";scene.style.transformOrigin="140vh 70vh";setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",3E3);setTimeout("text.innerHTML='Daddy!'",4E3);setTimeout("text.innerHTML=''",6E3);setTimeout("text.innerHTML='I lossst my soccer ball!'",7E3);setTimeout("text.innerHTML=''",9E3);setTimeout("text.innerHTML='But I found new moves!'",
1E4);setTimeout("text.innerHTML='';easteregg=lock=0;scene.style.transition='.8s';movesnake();checkapple();if(mobile){k_top.className=k_bottom.className='';L[P+'topbottom']=1}",13E3)}};checkgrid=function(){if(!Q&&null!==K){solved=1;for(i=0;i<t;i++)for(k=0;k<t;k++)self["g"+N+"-"+i+"-"+k]&&(self["g"+N+"-"+i+"-"+k].style.background=O[i][k]?"#000":"#fff"),self["w"+N+"-"+i+"-"+k]&&(self["w"+N+"-"+i+"-"+k].style.background=P[i][k]?"#000":"#fff");if(!(m[e]<F||m[e]>F+t-1||n[e]<G||n[e]>G+t-1||0>q[e]||q[e]>
t-1)){for(i=0;i<D;i++){self["g"+N+"-"+(n[e-i]-G)+"-"+(m[e-i]-F)]&&(self["g"+N+"-"+(n[e-i]-G)+"-"+(m[e-i]-F)].style.background=O[n[e-i]-G][m[e-i]-F]?"#080":"#f00");n[e-i]>=G&&n[e-i]<G+t&&self["w"+N+"-"+(t-1-q[e-i])+"-"+(m[e-i]-F)]&&(self["w"+N+"-"+(t-1-q[e-i])+"-"+(m[e-i]-F)].style.background=P[t-1-q[e-i]][m[e-i]-F]?"#080":"#f00");if(m[e-i]<F||m[e-i]>F+t-1||n[e-i]<G||n[e-i]>G+t-1||0>q[e-i]||q[e-i]>t-1)solved=0;Z&&O[n[e-i]-G]&&!O[n[e-i]-G][m[e-i]-F]&&(solved=0);X&&P[t-1-q[e-i]]&&!P[t-1-q[e-i]][m[e-
i]-F]&&(solved=0)}for(i=0;i<t;i++)for(k=0;k<t;k++){try{Z&&3==self["g"+N+"-"+i+"-"+k].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(la){}try{X&&3==self["w"+N+"-"+i+"-"+k].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(la){}}if(solved){Q=1;R&&setTimeout('share.disabled=0;playing=puzzling=0;b.className="editor";for(var i = exithead; i <= head; i++){snakex.pop();snakey.pop();snakez.pop();snakeangle.pop();} head = exithead - 1;exithead = 0; movesnake();',1E3);self["puzzle"+K].classList.remove("wrapvisible");
u["lossst_puzzle"+w+K]=1;for(i=0;i<t;i++)for(k=0;k<t;k++)self["g"+N+"-"+i+"-"+k]&&(self["g"+N+"-"+i+"-"+k].style.background=O[i][k]?"#44c":"#fd0"),self["w"+N+"-"+i+"-"+k]&&(self["w"+N+"-"+i+"-"+k].style.background=P[i][k]?"#44c":"#fd0");ha++;u.lossst_totalsolved=ha;var A=1,k;for(k in y)y[k][0]>=g[K][5]&&y[k][0]<g[K][5]+g[K][0]&&y[k][1]>=g[K][6]&&y[k][1]<g[K][6]+g[K][0]&&(delete y[k],A++,setTimeout('self["cube'+k+'"].remove()',200*A))}}}};checkapple=function(){for(var e in E)!u["lossst_appleappeared"+
w+e]&&(0<E[e][3]&&E[e][3]==D||0<E[e][4]&&E[e][4]==ha)&&(U=1,S&&"hub"==w&&1==e&&(k_backtrack.className="",u.lossst_backtrack=1),setTimeout('scene.style.transform="translateX("+(-apples['+e+'][0]*sidesize)+"vh)translateY("+(-apples['+e+'][1]*sidesize)+"vh)translateZ(-15vh)rotateX(40deg)";\nL[P+"appleappeared"+pagename+"'+e+'"] = 1;\nscene.style.transformOrigin=""+(apples['+e+'][0]*sidesize)+"vh "+(apples['+e+'][1]*sidesize)+"vh";\nself["apple"+'+e+'].className = "emoji apple";\nself["appleshadow"+'+
e+'].className = "emojishadow appleshadow";',250),setTimeout("movesnake();lock=0",2E3))};testinbounds=function(){T=0;R||(K=null);for(p in g)m[e]>=g[p][5]&&m[e]<g[p][5]+g[p][0]&&n[e]>=g[p][6]&&n[e]<g[p][6]+g[p][0]&&0<=q[e]&&q[e]<g[p][0]&&(K=+p,T=1)};onkeydown=function(g){self["lurd************************l**r************l*d***u**u"[g.which-37]]=1;18==g.which&&(B=1);16==g.which&&(s=1);17==g.which&&(c=1);U||(49!=g.which&&97!=g.which||da(-1.2),50!=g.which&&98!=g.which||da(0),51!=g.which&&99!=g.which||
da(1.2));testinbounds();T?checkgrid():Y=0;if(82==g.which&&T){if(Y<=e)for(var k=Y;k<=e;k++)m.pop(),n.pop(),q.pop(),C.pop();e=Y-1;Y=0;movesnake();checkgrid();u.lossst_moves=++ba;document.title="LOSSST: "+ba+"m, "+ea+"s"}else if(116!=g.which&&82!=g.which&&17!=g.which&&123!=g.which&&g.preventDefault&&g.preventDefault(),W&&!U){H=0;if(l)!Q&&V&&T&&m[e]==F?(checkmove(F+t-1,n[e],q[e]),H||(m.push(F+t-1),n.push(n[e]),q.push(q[e]),C.push(Math.PI/2),e++)):(checkmove(m[e]-1,n[e],q[e]),H||(m.push(m[e]-1),n.push(n[e]),
q.push(q[e]),C.push(Math.PI/2),e++));else if(r)!Q&&V&&T&&m[e]==F+t-1?(checkmove(F,n[e],q[e]),H||(m.push(F),n.push(n[e]),q.push(q[e]),C.push(-Math.PI/2),e++)):(checkmove(m[e]+1,n[e],q[e]),H||(m.push(m[e]+1),n.push(n[e]),q.push(q[e]),C.push(-Math.PI/2),e++));else if(fa)!Q&&V&&T&&n[e]==G?(checkmove(m[e],G+t-1,q[e]),H||(m.push(m[e]),n.push(G+t-1),q.push(q[e]),C.push(Math.PI),e++)):(checkmove(m[e],n[e]-1,q[e]),H||(m.push(m[e]),n.push(n[e]-1),q.push(q[e]),C.push(Math.PI),e++));else if(d)!Q&&V&&T&&n[e]==
G+t-1?(checkmove(m[e],G,q[e]),H||(m.push(m[e]),n.push(G),q.push(q[e]),C.push(0),e++)):(checkmove(m[e],n[e]+1,q[e]),H||(m.push(m[e]),n.push(n[e]+1),q.push(q[e]),C.push(0),e++));else if((L||X)&&s){if(!T){g=D-1;for(k in y)y[k][0]==m[e]&&y[k][1]==n[e]&&g++;if(q[e]==g)return}!Q&&V&&T&&q[e]==t-1?(checkmove(m[e],n[e],0),H||(m.push(m[e]),n.push(n[e]),q.push(0),C.push(C[e]),e++)):(checkmove(m[e],n[e],q[e]+1),H||(m.push(m[e]),n.push(n[e]),q.push(q[e]+1),C.push(C[e]),e++))}else(L||X)&&c?!Q&&V&&T&&0==q[e]?(checkmove(m[e],
n[e],t-1),H||(m.push(m[e]),n.push(n[e]),q.push(t-1),C.push(C[e]),e++)):0==q[e]?H=1:(checkmove(m[e],n[e],q[e]-1),H||(m.push(m[e]),n.push(n[e]),q.push(q[e]-1),C.push(C[e]),e++)):B&&e>D&&(C.pop(),m.pop(),n.pop(),q.pop(),e--);if(!H&&!ca&&(fa||r||d||l||s||c||B)){u.lossst_moves=++ba;R||(document.title="LOSSST: "+ba+"m, "+ea+"s");checkgrid();movesnake();R&&W&&checkgrid();movesnake(1);checkapple();U||(U=1,setTimeout("lock=0",150));if("hub"==w&&(L||14<=D)&&20==m[e]&&10==n[e]){U=1;for(k=g=0;k<D;k++)g--,setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push("+
g+");snakeangle.push(snakeangle[head]);head++;movesnake()",150*k);setTimeout("location='editor.html'",100*k);u.lossst_snakex=20;u.lossst_snakey=10}testinbounds();T&&!Y&&(Y=R?D:e)}}};onkeyup=function(){fa=r=d=l=s=c=B=0}