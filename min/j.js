a=()=>{var m=0,n=()=>{scene.style.transform="translateX(-"+C[A]*v+"vh)translateY(-"+D[A]*v+"vh)translateZ(40vh)rotateX(40deg)rotateZ("+m+"rad)"},o=localStorage,q="lossst_",v=7,A=0,C=[],D=[],E=[],F=[],G=o[q+"snakelength"]=+o[q+"snakelength"]||5,H=0,I=1,J=0,K=r=d=l=s=c=B=0,M=0,N=[],O=[],Q=[],R=[],S=[],T=[],U=null,V="e",W=[],X=[],Y=0,Z=0,$=0,_=0,aa=0,ba=0,ca=0,da=+o[q+"totalsolved"]||0,ea=0,fa="",ga=h=0,ha=()=>{if(b.className=fa,"hub"==fa){for(ga=40,h=20,N=[[13,9,0],[6,13,0],[35,8,0]],O=[[11,11,0,0,0],[2,12,0,6,0],[38,10,0,7,0]],Q=[[41,10,Math.PI/2,8,0,"1-1",1,0,10,0,0],[20,-2,0,14,0,"2-1",1,10,19,0,0],[-2,11,-Math.PI/2,6,0,"3-1",1,0,0,1,1],[28,21,Math.PI,14,0,"1-4",1,22,1,0,0]],T=[],R=[],la=9;15>la;la++)for(na=0;5>na;na++)if(2==na&&14==la||2==na&&13==la||3==na&&13==la||3==na&&12==la||2==na&&12==la);else R.push([na,la]);S=[["Move with arrow keys or WASD/ZQSD",19,5,0,13],["Backtrack with Alt or \u27F5",2,5,0,13],["You can open red doors when you reach the length written on them",30,5,0,13],["2D puzzle editor<br>\u2193",19,9,14,0]]}else if("1-1"==fa)ga=40,h=20,N=[[35,13,0]],O=[[33,14,0,0,6],[34,15,0,0,6],[37,13,0,0,6]],R=[],Q=[[-2,10,-Math.PI/2,8,0,"hub",0,39,11,0,0],[35,21,Math.PI,11,0,"1-3",1,35,1,0,0]],T=[[6,8,0,,"000000001000001110001110001000000000",2,3],[6,8,0,,"000000011000011100010000011000000000",14,3],[6,8,0,,"000000000100001100011000011100000000",26,3],[5,8,0,,"0000001110011100110000000",2,13],[6,8,0,,"000000011000011000001100001100000000",14,13],[6,8,0,,"000000000100001100001110001100000000",26,13]],S=[["You get new apples when all the puzzles in the room are solved",9,10,1,0]];else if("1-3"==fa)ga=40,h=20,N=[[35,8,0]],O=[[33,9,0,0,12],[34,10,0,0,12]],Q=[[35,-2,0,8,0,"1-1",0,35,19,0,0],[-2,10,-Math.PI/2,13,0,"1-4",1,39,10,0,0]],T=[[6,11,0,,"000000011110011010011110000000000000",2,2],[7,11,0,,"0000000001110000111000001100000110000010000000000",14,2],[6,11,0,,"000000011000011110001010001110000000",26,2],[6,11,0,,"000000011100001110001110001100000000",2,11],[6,11,0,,"000000001110001110001110001010000000",14,11],[6,11,0,,"000000011110011110001100001000000000",26,11]],S=[],R=[];else if("1-4"==fa)ga=40,h=20,N=[[35,8,0]],O=[[34,11,0,0,18]],Q=[[41,10,Math.PI/2,8,0,"1-3",0,1,10,0,0],[22,-2,0,14,0,"hub",1,28,19,0,0]],T=[[7,13,0,,"0000000000000001111000111100001111000100000000000",2,2],[7,13,0,,"0000000001110000101000011100001110000110000000000",14,2],[6,13,0,,"000000001110011110011010001110000000",26,2],[7,13,0,,"0000000001100000111000011100001110000110000000000",2,11],[7,13,0,,"0000000000000001111100101010011111000000000000000",14,11],[6,13,0,,"000000011000011100011110011110000000",26,11]],S=[["This was just a training. Go north to try a new kind of puzzles!",34,3,13,1,0]],R=[[17,4],[18,7],[29,5],[27,3],[27,6],[29,12],[30,12],[30,13],[18,14],[16,14],[6,12],[6,16],[7,7],[6,7],[5,7],[3,6],[3,7],[7,5],[7,4]];else if("2-1"==fa)for(ga=20,h=20,N=[],O=[],Q=[[10,21,Math.PI,14,0,"hub",0,20,0,0,0]],T=[[7,14,1,,"0100010011111000000000000000000000001111100100010",7,7]],S=[],R=[],la=0;20>la;la++)R.push([la,10]);else"2-2"==fa?(ga=70,h=20,N=[],O=[],Q=[],T=[[5,5,1,,"0111101001010110100011111",62,14],[5,5,1,,"1111011000111100001011110",50,14],[5,5,1,,"1111101000011110111001100",38,14],[5,5,1,,"1111110000111001000011111",26,14],[5,5,1,,"1100101101001110011101101",14,14],[5,5,1,,"1111101111001110001100001",2,14],[5,5,1,,"1010100101111010000111111",62,1],[5,5,1,,"1111100001110010000111111",50,1],[5,5,1,,"1000110001111011000111111",38,1],[5,5,1,,"1000110101101011111110001",26,1],[5,5,1,,"1111110000000111000111111",14,1],[5,5,1,,"0111101100011100011011110",2,1]],S=[],R=[]):"2-2"==fa&&(ga=20,h=70,N=[],O=[],Q=[],T=[[6,16,1,,"110011110011000000000000110011110011",0,0],[6,16,1,,"100011110011011000001100000110100011",0,0],[6,16,1,,"001110001100111000111000001100001110",0,0],[6,16,1,,"110010100110001100011000110001100011",0,0],[6,16,1,,"000000111111010010010010011110010010",0,0],[6,16,1,,"110110000100111101000001100001100110",0,0],[6,16,1,,"010110011110000010000000011110011110",0,0],[6,16,1,,"110011110000110000000011000011110011",0,0],[6,16,1,,"000001000011000110001111011111000101",0,0],[6,16,1,,"001100011110110011110011000000001100",0,0],[6,16,1,,"001000011000011100111111001110001000",0,0],[6,16,1,,"",0,0]],S=[],R=[]);for(var la in scene.style.width=ga*v+"vh",scene.style.height=h*v+"vh",objects.innerHTML="",puzzle.innerHTML="",N)objects.innerHTML+=`<div id=tree${la} class="emoji tree" style="left:${N[la][0]*v}vh;transform:translateX(-8vh)translateY(${N[la][1]*v+4}vh)rotateX(-75deg)">üå≥</div><div id=treeshadow${la} class="emojishadow treeshadow" style="left:${N[la][0]*v}vh;transform:translateX(-8vh)translateY(${N[la][1]*v+4}vh)rotateZ(144deg)scaleY(1.5)">üå≥`;for(la in O)o[q+"appleeaten"+fa+la]?delete O[la]:objects.innerHTML+=`<div id=apple${la} class="emoji apple ${o[q+"appleappeared"+fa+la]?"":"hidden"}" style="left:${O[la][0]*v}vh;transform:translateY(${O[la][1]*v+4}vh) rotateX(-65deg)">üçé</div><div id=appleshadow${la} class="emojishadow appleshadow ${o[q+"appleappeared"+fa+la]?"":"hidden"}" style="left:${O[la][0]*v}vh;transform:translateY(${O[la][1]*v+3}vh)rotateZ(144deg)">üçé`;for(la in Q)objects.innerHTML+=`<div id=door${""+fa+la} class="door${o[q+"door"+fa+la]?" open":""}" style="left:${(Q[la][0]+.5)*v}vh;top:${(Q[la][1]+.5)*v}vh;transform:rotateZ(${Q[la][2]}rad)translateZ(${Q[la][9]*v}vh)"><div class="realdoor door${Q[la][10]}" ${Q[la][6]?"":"hidden"}>${Q[la][3]}</div><div class=path>`;for(var ma in T)for(var na in R)o[q+"puzzle"+fa+ma]&&R[na][0]>=T[ma][5]&&R[na][0]<T[ma][5]+T[ma][0]&&R[na][1]>=T[ma][6]&&R[na][1]<T[ma][6]+T[ma][0]&&delete R[na];for(la in R)objects.innerHTML+=`<div id=cube${la} class="cube rock" style="left:${R[la][0]*v}vh;top:${R[la][1]*v}vh;width:7.2vh;height:7.2vh"><div class=front></div><div class=up style="background-position:${-300-R[la][0]*v}vh ${-140-R[la][1]*v}vh"></div><div class=right></div><div class=left>`;for(la in S)S[la][3]&&S[la][3]<=G||S[la][4]&&S[la][4]>=G?(S[la][4]=1,objects.innerHTML+=`<div id=hint${""+fa+la} class="hint" style="left:${S[la][1]*v}vh;transform:translateY(${S[la][2]*v+4}vh)rotateX(-70deg)translateY(-4vh)">${S[la][0]}`):S[la][4]=0;for(var ma in T){ca=T[ma][0];var pa="",qa=`<div class="cube wrap visible ${T[ma][2]?"wrapvisible":""}" style="left:${T[ma][5]*v}vh;top:${T[ma][6]*v}vh;width:${T[ma][0]*v}vh;height:${ca*v}vh">${T[ma][2]?"<div class=left></div><div class=right></div>":""}<div id=down${ma} class=down></div><div id=back${ma} class=back></div>${T[ma][2]?"<div class=front>":""}`;puzzle.innerHTML+=qa;var ra="000",sa="fff";for(o[q+"puzzle"+fa+ma]&&(ra="008",sa="fd0"),la=0;la<ca;la++)for(na=0;na<ca;na++)pa+=`<div class=cell id=g${ma}-${la}-${na} style='width:${v}vh;height:${v}vh;background:#${"1"==T[ma][4][la*ca+na]?ra:sa}'></div>`;self["down"+ma].innerHTML+=pa}"hub"!=fa||o[q+"snakex"]?(scene.style.transition="transform .8s, transform-origin .8s linear",ia()):debug?(scene.style.transition="transform .8s linear, transform-origin .8s linear",ia(),movesnake(),C.push(C[A]),D.push(D[A]),E.push(0),F.push(F[A]),A++,movesnake()):(M=1,setTimeout("resetsnake();movesnake();snakecubemove0.style.transition=\"transform .5s\"",2e3),setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",4500),setTimeout("snakecubemove0.style.transition='';snakeshadow0.style.transition=snakecuberotate0.style.transition='transform .2s';snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+-Math.PI/4+"rad)'",5e3),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+Math.PI/4+"rad)'",5500),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='';",6e3),setTimeout("scene.style.transition='transform .8s, transform-origin .8s linear';snakeshadow0.style.transition=snakecuberotate0.style.transition='';lock=0",9e3)),movesnake()},ia=la=>{if(snake.innerHTML="",la||(C=[],D=[],E=[],F=[]),H&&(v=32/ca),A=G-1,!la)if(H)for(i=0;i<G;i++)C[A-i]=-i-1,D[A-i]=~~(ca/2),E[A-i]=0,F[A-i]=-Math.PI/2;else if(o[q+"snakex"]){var ma=+o[q+"snakex"],na=+o[q+"snakey"],oa=+o[q+"snakez"];if(2>ma)for(i=0;i<G;i++)C[A-i]=ma-i,D[A-i]=na,E[A-i]=oa,F[A-i]=-Math.PI/2;else if(ma>ga-2)for(i=0;i<G;i++)C[A-i]=ma+i,D[A-i]=na,E[A-i]=oa,F[A-i]=Math.PI/2;else if(2>na)for(i=0;i<G;i++)C[A-i]=ma,D[A-i]=na-i,E[A-i]=oa,F[A-i]=0;else if(na>h-2)for(i=0;i<G;i++)C[A-i]=ma,D[A-i]=na+i,E[A-i]=oa,F[A-i]=0;else for(i=0;i<G;i++)C[A-i]=20,D[A-i]=10,E[A-i]=-i,F[A-i]=0}else if("hub"==b.className)for(i=0;i<G;i++)C[A-i]=20,D[A-i]=10,E[A-i]=-i-1,F[A-i]=0;for(i=0;i<Math.max(G,16);i++)snake.innerHTML+=`<div id=snakecubemove${i} class=snakecubemove style="transform:translateX(50vh)translateY(50vh)translateZ(-30vh);width:${v-1}vh;height:${v-1}vh"><div class=snakeshadow id=snakeshadow${i}></div><div id=snakecuberotate${i} class=snakecuberotate><div class="cube snake" id=snakecube${i}>${1>i?"<div class=tongue>Y</div>":""}<div class=front>${1>i?"\u203F":""}</div><div class=up style="font-size:${.5*v}vh;line-height:${.8*v}vh">${1>i?"\uD83D\uDC40":""}</div><div class=right></div><div class=left></div><div class=back>`};movesnake=la=>{for(qa=0;qa<G;qa++){if(!la){var ma=oldx=oldy=oldz=newx=newy=newz=0;if($&&ca&&(C[A-qa-1]==aa&&C[A-qa]==aa+ca-1?(ma=1,oldx=aa-1,newx=aa+ca,oldy=newy=D[A-qa],oldz=newz=E[A-qa]):C[A-qa-1]==aa+ca-1&&C[A-qa]==aa?(ma=1,oldx=aa+ca,newx=aa-1,oldy=newy=D[A-qa],oldz=newz=E[A-qa]):D[A-qa-1]==ba&&D[A-qa]==ba+ca-1?(ma=1,oldy=ba-1,newy=ba+ca,oldx=newx=C[A-qa],oldz=newz=E[A-qa]):D[A-qa-1]==ba+ca-1&&D[A-qa]==ba?(ma=1,oldy=ba+ca,newy=ba-1,oldx=newx=C[A-qa],oldz=newz=E[A-qa]):0==E[A-qa-1]&&E[A-qa]==ca-1?(ma=1,oldz=-1,newz=ca,oldx=newx=C[A-qa],oldy=newy=D[A-qa]):E[A-qa-1]==ca-1&&0==E[A-qa]&&(ma=1,oldz=ca,newz=-1,oldx=newx=C[A-qa],oldy=newy=D[A-qa])),ma)self["snakecuberotate"+qa].style.transform=`rotateZ(${F[A-qa]}rad)`,self["snakecubemove"+qa].style.transform=`translateX(${oldx*v+.5}vh)translateY(${oldy*v+.5}vh)translateZ(${oldz*v+.5}vh)scale(.01)scaleZ(.01)`,setTimeout("snakecubemove"+qa+".style.transition='none'",150),setTimeout("snakecubemove"+qa+".style.transform=`translateX(${"+newx+"*sidesize+.5}vh)translateY(${"+newy+"*sidesize+.5}vh)translateZ(${"+newz+"*sidesize+.5}vh)scale(.01)`",175),setTimeout("snakecubemove"+qa+".style.transition='';snakecubemove"+qa+".style.transform=`translateX(${snakex["+(A-qa)+"]*sidesize+.5}vh)translateY(${snakey["+(A-qa)+"]*sidesize+.5}vh)translateZ(${snakez["+(A-qa)+"]*sidesize+.5}vh)`",200);else try{self["snakecubemove"+qa].style.transform=`translateX(${C[A-qa]*v+.5}vh)translateY(${D[A-qa]*v+.5}vh)translateZ(${E[A-qa]*v+.9}vh)`,self["snakecuberotate"+qa].style.transform=`rotateZ(${F[A-qa]}rad)`}catch(ra){}try{self["snakeshadow"+qa].style.display=0==E[A-qa]?"":"none"}catch(ra){}}H||(null===U||o[q+"puzzle"+fa+U]?(scene.style.transform="translateX("+-C[A]*v+"vh)translateY("+-D[A]*v+"vh)translateZ(15vh)rotateX(40deg)",scene.style.transformOrigin=""+C[A]*v+"vh "+D[A]*v+"vh"):(scene.style.transform="translateX("+(-(aa+T[U][0]/2)*v+5)+"vh)translateY("+(-(ba+T[U][0]/2)*v+8)+"vh)translateZ("+(60-T[U][0]*(v+3))+"vh)rotateX(30deg)",scene.style.transformOrigin=""+((aa+T[U][0]/2)*v+5)+"vh "+((ba+T[U][0]/2-1)*v+8)+"vh"))}var na=C[A],oa=D[A],pa=E[A];for(var qa in Q)self["door"+fa+qa]&&0<Q[qa][3]&&G>=Q[qa][3]&&4>Math.hypot(na-Q[qa][0],oa-Q[qa][1])&&(self["door"+fa+qa].className="door open",o[q+"door"+fa+qa]=1),self["door"+fa+qa]&&"door open"==self["door"+fa+qa].className&&2>Math.hypot(na-Q[qa][0],oa-Q[qa][1])&&(o[q+"page"]=fa=Q[qa][5],setTimeout(ha,600),o[q+"snakex"]=Q[qa][7],o[q+"snakey"]=Q[qa][8],o[q+"snakez"]=0,o[q+"snakeangle"]=F[A]);if(!H)for(p in checkgrid(),J=0,U=null,W=[],T)if(na>=T[p][5]&&na<T[p][5]+T[p][0]&&oa>=T[p][6]&&oa<T[p][6]+T[p][0]){for(U=+p,_=0,o[q+"puzzle"+fa+p]?_=1:J=1,V=p,Y=!!T[p][4],Z=!!T[p][3],$=!!T[p][2],aa=T[p][5],ba=T[p][6],ca=T[p][0],qa=0;qa<ca;qa++)for(W[qa]=[],j=0;j<ca;j++)W[qa][j]=+T[p][4][qa*T[p][0]+j];checkgrid()}},checkmove=(la,ma,na)=>{for(var oa in ea=0,H&&I?(-5>la||la>ca+3||-2>ma||ma>ca)&&(ea=1):(0>la||la>=ga||0>ma||ma>=h)&&(ea=1),N)la>=N[oa][0]-1&&la<=N[oa][0]+1&&ma==N[oa][1]&&(ea=1);for(var oa in S)S[oa][4]&&la>=S[oa][1]&&la<=S[oa][1]+2&&ma==S[oa][2]&&(ea=1);for(var oa in O)o[q+"appleappeared"+fa+oa]&&la==O[oa][0]&&ma==O[oa][1]&&(delete O[oa],self["apple"+oa].remove(),self["appleshadow"+oa].remove(),G++,o[q+"snakelength"]=G,o[q+"appleeaten"+fa+oa]=1);for(var oa in R)la==R[oa][0]&&ma==R[oa][1]&&(ea=1);for(var oa in Q)self["door"+fa+oa]&&"door open"==self["door"+fa+oa].className&&2>=Math.hypot(la-Q[oa][0],ma-Q[oa][1])&&(ea=0);for(oa=G-2;0<oa;oa--)C[A-oa]==la&&D[A-oa]==ma&&E[A-oa]==na&&(ea=1)},checkgrid=()=>{if(!_&&null!==U){for(solved=1,i=0;i<ca;i++)for(na=0;na<ca;na++)self[`g${V}-${i}-${na}`]&&(self[`g${V}-${i}-${na}`].style.background=W[i][na]?"#000":"#fff"),self[`w${V}-{i}-${na}`]&&(self[`w${V}-{i}-${na}`].style.background=X[i][na]?"#000":"#fff");if(!(C[A]<aa||C[A]>aa+ca-1||D[A]<ba||D[A]>ba+ca-1||0>E[A]||E[A]>ca-1)){for(i=0;i<G;i++)self[`g${V}-${D[A-i]-ba}-${C[A-i]-aa}`]&&(self[`g${V}-${D[A-i]-ba}-${C[A-i]-aa}`].style.background=W[D[A-i]-ba][C[A-i]-aa]?"#080":"#F00"),(C[A-i]<aa||C[A-i]>aa+ca-1||D[A-i]<ba||D[A-i]>ba+ca-1||0>E[A-i]||E[A-i]>ca-1)&&(solved=0),Y&&W[D[A-i]-ba]&&!W[D[A-i]-ba][C[A-i]-aa]&&(solved=0),Z&&X[ca-1-E[A-i]]&&!X[ca-1-E[A-i]][C[A-i]-aa]&&(solved=0);for(i=0;i<ca;i++)for(na=0;na<ca;na++)try{Y&&3==self[`g${V}-${i}-${na}`].style.backgroundColor.match(/0/g).length&&(solved=0),Z&&3==self[`w${V}-${i}-${na}`].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(oa){}if(solved){for(_=1,o[q+"puzzle"+fa+U]=1,i=0;i<ca;i++)for(na=0;na<ca;na++)self[`g${V}-${i}-${na}`]&&(self[`g${V}-${i}-${na}`].style.background=W[i][na]?"#008":"fd0"),self[`w${V}-{i}-${na}`]&&(self[`w${V}-{i}-${na}`].style.background=X[i][na]?"#008":"#fd0");da++,o[q+"totalsolved"]=da;var ma=1;for(var na in R)R[na][0]>=T[U][5]&&R[na][0]<T[U][5]+T[U][0]&&R[na][1]>=T[U][6]&&R[na][1]<T[U][6]+T[U][0]&&(delete R[na],ma++,setTimeout("self[\"cube"+na+"\"].remove()",200*ma))}}}},checkapple=()=>{for(var ma in O)!o[q+"appleappeared"+fa+ma]&&(0<O[ma][3]&&O[ma][3]==G||0<O[ma][4]&&O[ma][4]==da)&&(M=1,setTimeout(`scene.style.transform="translateX("+(-apples[`+ma+`][0]*sidesize)+"vh)translateY("+(-apples[`+ma+`][1]*sidesize)+"vh)translateZ(-5vh)rotateX(30deg)";
      
      L[P + "appleappeared"+pagename+"`+ma+`"] = 1;
      
      scene.style.transformOrigin=""+(apples[`+ma+`][0]*sidesize)+"vh "+(apples[`+ma+`][1]*sidesize)+"vh";

      // Show apple falling
      self["apple"+`+ma+`].className = "emoji apple";
      self["appleshadow"+`+ma+`].className = "emojishadow appleshadow";`,250),setTimeout("movesnake();lock=0",2e3))},onkeydown=la=>{self["lurd************************l**r************l*d***u**u"[la.which-37]]=1,(8==la.which||18==la.which)&&(B=1),16==la.which&&(s=1),17==la.which&&(c=1),116!=la.keyCode&&82!=la.keyCode&&17!=la.keyCode&&123!=la.keyCode&&la.preventDefault();var ma=0;if(I&&J&&C[A]>=aa&&C[A]<aa+T[U][1]&&D[A]>=ba&&D[A]<ba+T[U][1]&&0<=E[A]&&E[A]<ca&&(ma=1),I&&!M&&(ea=0,l?$&&ma&&C[A]==aa?(checkmove(aa+ca-1,D[A],E[A]),!ea&&(C.push(aa+ca-1),D.push(D[A]),E.push(E[A]),F.push(Math.PI/2),A++)):(checkmove(C[A]-1,D[A],E[A]),!ea&&(C.push(C[A]-1),D.push(D[A]),E.push(E[A]),F.push(Math.PI/2),A++)):r?$&&ma&&C[A]==aa+ca-1?(checkmove(aa,D[A],E[A]),!ea&&(C.push(aa),D.push(D[A]),E.push(E[A]),F.push(-Math.PI/2),A++)):(checkmove(C[A]+1,D[A],E[A]),!ea&&(C.push(C[A]+1),D.push(D[A]),E.push(E[A]),F.push(-Math.PI/2),A++)):K?$&&ma&&D[A]==ba?(checkmove(C[A],ba+ca-1,E[A]),!ea&&(C.push(C[A]),D.push(ba+ca-1),E.push(E[A]),F.push(Math.PI),A++)):(checkmove(C[A],D[A]-1,E[A]),!ea&&(C.push(C[A]),D.push(D[A]-1),E.push(E[A]),F.push(Math.PI),A++)):d?$&&ma&&D[A]==ba+ca-1?(checkmove(C[A],ba,E[A]),!ea&&(C.push(C[A]),D.push(ba),E.push(E[A]),F.push(0),A++)):(checkmove(C[A],D[A]+1,E[A]),!ea&&(C.push(C[A]),D.push(D[A]+1),E.push(E[A]),F.push(0),A++)):Z&&s?$&&ma&&E[A]==ca-1?(checkmove(C[A],D[A],0),!ea&&(C.push(C[A]),D.push(D[A]),E.push(0),F.push(F[A]),A++)):(checkmove(C[A],D[A],E[A]+1),!ea&&(C.push(C[A]),D.push(D[A]),E.push(E[A]+1),F.push(F[A]),A++)):Z&&c?$&&ma&&0==E[A]?(checkmove(C[A],D[A],ca-1),!ea&&(C.push(C[A]),D.push(D[A]),E.push(ca-1),F.push(F[A]),A++)):0==E[A]?ea=1:(checkmove(C[A],D[A],E[A]-1),!ea&&(C.push(C[A]),D.push(D[A]),E.push(E[A]-1),F.push(F[A]),A++)):B&&A>G&&(F.pop(),C.pop(),D.pop(),E.pop(),A--),!ea&&(K||r||d||l||s||c||B)&&(movesnake(),H&&I&&checkgrid(),movesnake(1),checkapple(),M||(M=1,setTimeout("lock=0",100)),"hub"==fa&&14<=G&&20==C[A]&&10==D[A]))){M=1;var na=0;for(i=0;i<G;i++)na--,setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push("+na+");snakeangle.push(snakeangle[head]);head++;movesnake()",150*i);setTimeout("location='editor.html'",150*i),o[q+"snakex"]=20,o[q+"snakey"]=10}},onkeyup=()=>{K=r=d=l=s=c=B=0}};