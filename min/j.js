a=()=>{var m=0,n=()=>{scene.style.transform="translateX(-"+E[D]*C+"vh)translateY(-"+F[D]*C+"vh)translateZ(40vh)rotateX(40deg)rotateZ("+m+"rad)"},o=localStorage,q="lossst_",v=0,A=+o[q+"son"]||0,C=7,D=0,E=[],F=[],G=[],H=[],I=o[q+"snakelength"]=+o[q+"snakelength"]||5,J=0,K=1,M=0,N=r=d=l=s=c=B=0,O=0,Q=[],R=[],S=[],T=[],U=[],V=[],W=null,X="e",Y=[],Z=[],$=0,_=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=+o[q+"totalsolved"]||0,ga=0,ha=0,ia="",ja=h=0,ka=()=>{if(b.className=ia,"hub"==ia){for(ja=40,h=20,Q=[[13,9,0],[6,13,0],[35,8,0]],R=[[11,11,0,0,0],[2,12,0,6,0],[38,10,0,7,0]],S=[[41,10,Math.PI/2,8,0,"1-1",1,0,10,0,0],[20,-2,0,14,0,"2-1",1,10,19,0,0],[-2,11,-Math.PI/2,6,0,"3-1",1,0,0,1,1],[28,21,Math.PI,14,0,"1-4",1,22,1,0,0]],V=[],T=[],oa=9;15>oa;oa++)for(qa=0;5>qa;qa++)if(2==qa&&14==oa||2==qa&&13==oa||3==qa&&13==oa||3==qa&&12==oa||2==qa&&12==oa);else T.push([qa,oa]);U=[["Move with arrow keys or WASD/ZQSD",19,5,0,13],["Backtrack with Alt or \u27F5",2,5,0,13],["You can open red doors when you reach the length written on them",30,5,0,13],["2D puzzle editor<br>\u2193",19,9,14,0]]}else if("1-1"==ia)ja=40,h=20,Q=[[35,13,0]],R=[[33,14,0,0,6],[34,15,0,0,6],[37,13,0,0,6]],T=[[16,6],[29,6]],S=[[-2,10,-Math.PI/2,8,0,"hub",0,39,11,0,0],[35,21,Math.PI,11,0,"1-3",1,35,1,0,0]],V=[[6,8,0,,"000000001000001110001110001000000000",2,3],[6,8,0,,"000000011000011100010000011000000000",14,3],[6,8,0,,"000000000100001100011000011100000000",26,3],[5,8,0,,"0000001110011100110000000",2,13],[6,8,0,,"000000011000011000001100001100000000",14,13],[6,8,0,,"000000000100001100001110001100000000",26,13]],U=[["You get new apples when all the puzzles in the room are solved",9,10,1,0]];else if("1-3"==ia)ja=40,h=20,Q=[[35,8,0]],R=[[33,9,0,0,12],[34,10,0,0,12]],S=[[35,-2,0,8,0,"1-1",0,35,19,0,0],[-2,10,-Math.PI/2,13,0,"1-4",1,39,10,0,0]],V=[[6,11,0,,"000000011110011010011110000000000000",2,2],[7,11,0,,"0000000001110000111000001100000110000010000000000",14,2],[6,11,0,,"000000011000011110001010001110000000",26,2],[6,11,0,,"000000011100001110001110001100000000",2,11],[6,11,0,,"000000001110001110001110001010000000",14,11],[6,11,0,,"000000011110011110001100001000000000",26,11]],U=[],T=[[5,4],[17,15]];else if("1-4"==ia)ja=40,h=20,Q=[[35,8,0]],R=[[34,11,0,0,18]],S=[[41,10,Math.PI/2,8,0,"1-3",0,1,10,0,0],[22,-2,0,14,0,"hub",1,28,19,0,0]],V=[[7,13,0,,"0000000000000001111000111100001111000100000000000",2,2],[7,13,0,,"0000000001110000101000011100001110000110000000000",14,2],[6,13,0,,"000000001110011110011010001110000000",26,2],[7,13,0,,"0000000001100000111000011100001110000110000000000",2,11],[7,13,0,,"0000000000000001111100101010011111000000000000000",14,11],[6,13,0,,"000000011000011100011110011110000000",26,11]],U=[["This was just a training. Go north to try a new kind of puzzles!",34,3,13,1,0]],T=[[17,4],[18,7],[29,5],[27,3],[27,6],[29,12],[30,12],[30,13],[18,14],[16,14],[6,12],[6,16],[7,7],[6,7],[5,7],[3,6],[3,7],[7,5],[7,4]];else if("2-1"==ia)for(ja=20,h=20,Q=[[10,2,0]],R=[[8,2,0,0,19]],S=[[10,21,Math.PI,14,0,"hub",0,20,0,0,0],[-2,5,-Math.PI/2,15,0,"2-2",1,79,5,0,0]],V=[[7,14,1,,"0100010011111000000000000000000000001111100100010",7,7]],U=[["Now you're thinking with wraps!",2,2,0,14,0]],T=[],oa=0;20>oa;oa++)T.push([oa,10]);else"2-2"==ia?(ja=80,h=20,Q=[[35,10,0]],R=[[38,11,0,0,31]],S=[[81,5,Math.PI/2,15,0,"2-1",0,0,5,0,0],[-2,15,-Math.PI/2,16,0,"2-3",1,19,5,0,0]],V=[[5,5,1,,"0111101001010110100011111",59,13],[5,5,1,,"1111011000111100001011110",48,13],[5,5,1,,"1111101000011110111001100",37,13],[5,5,1,,"1111110000111001000011111",26,13],[5,5,1,,"1100101101001110011101101",15,13],[5,5,1,,"1111100001110010000111111",59,2],[5,5,1,,"1000110111100011000111111",48,2],[5,5,1,,"1000110101101011111110001",37,2],[5,5,1,,"1111110001000110000111111",26,2],[5,5,1,,"0111101100011100011011110",15,2],[5,5,1,,"1111101111001110001100001",4,8],[5,5,1,,"1010100101111010000111111",71,8]],U=[["To exit a wrap puzzle, you can either solve it, backtrack, or press R.",72,2,0,15,0]],T=[]):"2-3"==ia?(ja=20,h=30,Q=[],R=[],S=[],V=[[6,16,1,,"001000011000011100111111001110001000",7,7],[6,16,1,,"110001100001000111000111100001110001",7,17]],U=[],T=[]):"2-4"==ia?(ja=20,h=30,Q=[],R=[],S=[],V=[[6,16,1,,"001000011110111111011110011110001000",7,7],[6,16,1,,"110001100001000011000111001111111111",7,17]],U=[],T=[]):"2-5"==ia&&(ja=40,h=20,Q=[],R=[],S=[],V=[],U=[["Lil'snake can move up and down with Shift and Ctrl keys, and open black doors",30,9,1,0]],T=[]);for(var oa in scene.style.width=ja*C+"vh",scene.style.height=h*C+"vh",objects.innerHTML="",puzzle.innerHTML="",Q)objects.innerHTML+=`<div id=tree${oa} class="emoji tree" style="left:${Q[oa][0]*C}vh;transform:translateX(-8vh)translateY(${Q[oa][1]*C+4}vh)rotateX(-75deg)">??</div><div id=treeshadow${oa} class="emojishadow treeshadow" style="left:${Q[oa][0]*C}vh;transform:translateX(-8vh)translateY(${Q[oa][1]*C+4}vh)rotateZ(144deg)scaleY(1.5)">??`;for(oa in R)o[q+"appleeaten"+ia+oa]?delete R[oa]:objects.innerHTML+=`<div id=apple${oa} class="emoji apple ${o[q+"appleappeared"+ia+oa]?"":"hidden"}" style="left:${R[oa][0]*C}vh;transform:translateY(${R[oa][1]*C+4}vh) rotateX(-65deg)">??</div><div id=appleshadow${oa} class="emojishadow appleshadow ${o[q+"appleappeared"+ia+oa]?"":"hidden"}" style="left:${R[oa][0]*C}vh;transform:translateY(${R[oa][1]*C+3}vh)rotateZ(144deg)">??`;for(oa in S)objects.innerHTML+=`<div id=door${""+ia+oa} class="door${o[q+"door"+ia+oa]?" open":""}" style="left:${(S[oa][0]+.5)*C}vh;top:${(S[oa][1]+.5)*C}vh;transform:rotateZ(${S[oa][2]}rad)translateZ(${S[oa][9]*C}vh)"><div class="realdoor door${S[oa][10]}" ${S[oa][6]?"":"hidden"}>${S[oa][3]}</div><div class=path>`;for(var pa in V)for(var qa in T)o[q+"puzzle"+ia+pa]&&T[qa][0]>=V[pa][5]&&T[qa][0]<V[pa][5]+V[pa][0]&&T[qa][1]>=V[pa][6]&&T[qa][1]<V[pa][6]+V[pa][0]&&delete T[qa];for(oa in T)objects.innerHTML+=`<div id=cube${oa} class="cube rock" style="left:${T[oa][0]*C}vh;top:${T[oa][1]*C}vh;width:7.2vh;height:7.2vh"><div class=front></div><div class=up style="background-position:${-300-T[oa][0]*C}vh ${-140-T[oa][1]*C}vh"></div><div class=right></div><div class=left>`;for(oa in U)U[oa][3]&&U[oa][3]<=I||U[oa][4]&&U[oa][4]>=I?(U[oa][4]=1,objects.innerHTML+=`<div id=hint${""+ia+oa} class="hint" style="left:${U[oa][1]*C}vh;transform:translateY(${U[oa][2]*C+4}vh)rotateX(-70deg)translateY(-4vh)">${U[oa][0]}`):U[oa][4]=0;for(var pa in V){ea=V[pa][0];var sa="",ta=`<div class="cube wrap visible ${V[pa][2]?"wrapvisible":""}" style="left:${V[pa][5]*C}vh;top:${V[pa][6]*C}vh;width:${V[pa][0]*C}vh;height:${ea*C}vh">${V[pa][2]?"<div class=left></div><div class=right></div>":""}<div id=down${pa} class=down></div><div id=back${pa} class=back></div>${V[pa][2]?"<div class=front>":""}`;puzzle.innerHTML+=ta;var ua="000",va="fff";for(o[q+"puzzle"+ia+pa]&&(ua="44c",va="fd0"),oa=0;oa<ea;oa++)for(qa=0;qa<ea;qa++)sa+=`<div class=cell id=g${pa}-${oa}-${qa} style='width:${C}vh;height:${C}vh;background:#${"1"==V[pa][4][oa*ea+qa]?ua:va}'></div>`;self["down"+pa].innerHTML+=sa}"hub"!=ia||o[q+"snakex"]?(scene.style.transition="transform .8s, transform-origin .8s linear",la()):debug?(scene.style.transition="transform .8s linear, transform-origin .8s linear",la(),movesnake(),E.push(E[D]),F.push(F[D]),G.push(0),H.push(H[D]),D++,movesnake()):(O=1,setTimeout("resetsnake();movesnake();snakecubemove0.style.transition=\"transform .5s\"",2e3),setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",4500),setTimeout("snakecubemove0.style.transition='';snakeshadow0.style.transition=snakecuberotate0.style.transition='transform .2s';snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+-Math.PI/4+"rad)'",5e3),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+Math.PI/4+"rad)'",5500),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='';",6e3),setTimeout("scene.style.transition='transform .8s, transform-origin .8s linear';snakeshadow0.style.transition=snakecuberotate0.style.transition='';lock=0",9e3)),movesnake()},la=oa=>{var pa=snake;if(A&&(pa=snake2),pa.innerHTML="",oa||(E=[],F=[],G=[],H=[]),J&&(C=32/ea),D=I-1,!oa)if(J)for(i=0;i<I;i++)E[D-i]=-i-1,F[D-i]=~~(ea/2),G[D-i]=0,H[D-i]=-Math.PI/2;else if(o[q+"snakex"]){var qa=+o[q+"snakex"],ra=+o[q+"snakey"],sa=+o[q+"snakez"];if("2-5"==ia&&1==A)for(i=0;i<I;i++)E[D-i]=20,F[D-i]=10,G[D-i]=-i-1,H[D-i]=0;else if(2>qa)for(i=0;i<I;i++)E[D-i]=qa-i,F[D-i]=ra,G[D-i]=sa,H[D-i]=-Math.PI/2;else if(qa>ja-2)for(i=0;i<I;i++)E[D-i]=qa+i,F[D-i]=ra,G[D-i]=sa,H[D-i]=Math.PI/2;else if(2>ra)for(i=0;i<I;i++)E[D-i]=qa,F[D-i]=ra-i,G[D-i]=sa,H[D-i]=0;else if(ra>h-2)for(i=0;i<I;i++)E[D-i]=qa,F[D-i]=ra+i,G[D-i]=sa,H[D-i]=0;else for(i=0;i<I;i++)E[D-i]=20,F[D-i]=10,G[D-i]=-i,H[D-i]=0}else if("hub"==b.className)for(i=0;i<I;i++)E[D-i]=20,F[D-i]=10,G[D-i]=-i-1,H[D-i]=0;for(i=0;i<Math.max(I,16);i++)pa.innerHTML+=`<div id=snakecubemove${i} class=snakecubemove style="transform:translateX(50vh)translateY(50vh)translateZ(-30vh);width:${C-1}vh;height:${C-1}vh"><div class=snakeshadow id=snakeshadow${i}></div><div id=snakecuberotate${i} class=snakecuberotate><div class="cube snake" id=snakecube${i}>${1>i?"<div class=tongue>Y</div>":""}<div class=front>${1>i?"\u203F":""}</div><div class=up style="font-size:${.5*C}vh;line-height:${.8*C}vh">${1>i?"\uD83D\uDC40":""}</div><div class=right></div><div class=left></div><div class=back>`};movesnake=oa=>{for(ta=0;ta<I;ta++){if(!oa){var pa=oldx=oldy=oldz=newx=newy=newz=0;if(aa&&ea&&(E[D-ta-1]==ca&&E[D-ta]==ca+ea-1?(pa=1,oldx=ca-1,newx=ca+ea,oldy=newy=F[D-ta],oldz=newz=G[D-ta]):E[D-ta-1]==ca+ea-1&&E[D-ta]==ca?(pa=1,oldx=ca+ea,newx=ca-1,oldy=newy=F[D-ta],oldz=newz=G[D-ta]):F[D-ta-1]==da&&F[D-ta]==da+ea-1?(pa=1,oldy=da-1,newy=da+ea,oldx=newx=E[D-ta],oldz=newz=G[D-ta]):F[D-ta-1]==da+ea-1&&F[D-ta]==da?(pa=1,oldy=da+ea,newy=da-1,oldx=newx=E[D-ta],oldz=newz=G[D-ta]):0==G[D-ta-1]&&G[D-ta]==ea-1?(pa=1,oldz=-1,newz=ea,oldx=newx=E[D-ta],oldy=newy=F[D-ta]):G[D-ta-1]==ea-1&&0==G[D-ta]&&(pa=1,oldz=ea,newz=-1,oldx=newx=E[D-ta],oldy=newy=F[D-ta])),pa)self["snakecuberotate"+ta].style.transform=`rotateZ(${H[D-ta]}rad)`,self["snakecubemove"+ta].style.transform=`translateX(${oldx*C+.5}vh)translateY(${oldy*C+.5}vh)translateZ(${oldz*C+.5}vh)scale(.01)scaleZ(.01)`,setTimeout("snakecubemove"+ta+".style.transition='none'",150),setTimeout("snakecubemove"+ta+".style.transform=`translateX(${"+newx+"*sidesize+.5}vh)translateY(${"+newy+"*sidesize+.5}vh)translateZ(${"+newz+"*sidesize+.5}vh)scale(.01)`",175),setTimeout("snakecubemove"+ta+".style.transition='';snakecubemove"+ta+".style.transform=`translateX(${snakex["+(D-ta)+"]*sidesize+.5}vh)translateY(${snakey["+(D-ta)+"]*sidesize+.5}vh)translateZ(${snakez["+(D-ta)+"]*sidesize+.5}vh)`",200);else try{self["snakecubemove"+ta].style.transform=`translateX(${E[D-ta]*C+.5}vh)translateY(${F[D-ta]*C+.5}vh)translateZ(${G[D-ta]*C+.9}vh)`,self["snakecuberotate"+ta].style.transform=`rotateZ(${H[D-ta]}rad)`}catch(ua){}try{self["snakeshadow"+ta].style.display=0==G[D-ta]?"":"none"}catch(ua){}}J||(null===W||o[q+"puzzle"+ia+W]?(scene.style.transform="translateX("+-E[D]*C+"vh)translateY("+-F[D]*C+"vh)translateZ(15vh)rotateX(40deg)",scene.style.transformOrigin=""+E[D]*C+"vh "+F[D]*C+"vh"):(scene.style.transform="translateX("+(-(ca+V[W][0]/2)*C+5)+"vh)translateY("+(-(da+V[W][0]/2)*C+8)+"vh)translateZ("+(60-V[W][0]*(C+3))+"vh)rotateX(30deg)",scene.style.transformOrigin=""+((ca+V[W][0]/2)*C+5)+"vh "+((da+V[W][0]/2-1)*C+8)+"vh"))}var qa=E[D],ra=F[D],sa=G[D];for(var ta in S)self["door"+ia+ta]&&0<S[ta][3]&&I>=S[ta][3]&&4>Math.hypot(qa-S[ta][0],ra-S[ta][1])&&(self["door"+ia+ta].className="door open",o[q+"door"+ia+ta]=1),self["door"+ia+ta]&&"door open"==self["door"+ia+ta].className&&2>Math.hypot(qa-S[ta][0],ra-S[ta][1])&&(o[q+"page"]=ia=S[ta][5],setTimeout(ka,600),o[q+"snakex"]=S[ta][7],o[q+"snakey"]=S[ta][8],o[q+"snakez"]=0,o[q+"snakeangle"]=H[D]);if(!J)for(p in checkgrid(),M=0,W=null,Y=[],V)if(qa>=V[p][5]&&qa<V[p][5]+V[p][0]&&ra>=V[p][6]&&ra<V[p][6]+V[p][0]){for(W=+p,ba=0,o[q+"puzzle"+ia+p]?ba=1:M=1,X=p,$=!!V[p][4],_=!!V[p][3],aa=!!V[p][2],ca=V[p][5],da=V[p][6],ea=V[p][0],ta=0;ta<ea;ta++)for(Y[ta]=[],j=0;j<ea;j++)Y[ta][j]=+V[p][4][ta*V[p][0]+j];checkgrid()}},checkmove=(oa,pa,qa)=>{for(var ra in ha=0,J&&K?(-5>oa||oa>ea+3||-2>pa||pa>ea)&&(ha=1):(0>oa||oa>=ja||0>pa||pa>=h)&&(ha=1),Q)oa>=Q[ra][0]-1&&oa<=Q[ra][0]+1&&pa==Q[ra][1]&&(ha=1);for(var ra in U)U[ra][4]&&oa>=U[ra][1]&&oa<=U[ra][1]+2&&pa==U[ra][2]&&(ha=1);for(var ra in R)o[q+"appleappeared"+ia+ra]&&oa==R[ra][0]&&pa==R[ra][1]&&(delete R[ra],self["apple"+ra].remove(),self["appleshadow"+ra].remove(),I++,o[q+"snakelength"]=I,o[q+"appleeaten"+ia+ra]=1,"2-2"==ia&&16==I&&(O=1,v=1,scene.style.transition="5s",scene.style.transform="translateX(-266vh)translateY(-110vh)translateZ(-400vh)rotateX(0deg)rotateZ(180deg)",setTimeout("scene.style.transition='.8s';lock=easteregg=0;movesnake()",1e4)));for(var ra in T)oa==T[ra][0]&&pa==T[ra][1]&&(ha=1);for(var ra in S)self["door"+ia+ra]&&"door open"==self["door"+ia+ra].className&&2>=Math.hypot(oa-S[ra][0],pa-S[ra][1])&&(ha=0);for(ra=I-2;0<ra;ra--)E[D-ra]==oa&&F[D-ra]==pa&&G[D-ra]==qa&&(ha=1);if("2-5"==ia&&18<=oa&&!A){for(ha=1,O=1,v=A=1,o[q+"son"]=1,o[q+"snakelength"]=I=5,ra=0;21>ra;ra++)T.push([E[D-ra],F[D-ra]]),self["snakecubemove"+ra].id="",self["snakecuberotate"+ra].id="",self["snakeshadow"+ra].id="",self["snakecube"+ra].id="";scene.style.transition="2s",la(),movesnake(),scene.style.transform="translateX(-142vh)translateY(-70vh)translateZ(80vh)rotateX(45deg)",scene.style.transformOrigin="140vh 70vh",setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",3e3),setTimeout("text.innerHTML='Daddy!'",4e3),setTimeout("text.innerHTML=''",6e3),setTimeout("text.innerHTML='I lossst my basketball!'",7e3),setTimeout("text.innerHTML=''",9e3),setTimeout("text.innerHTML='But I found new moves!'",1e4),setTimeout("text.innerHTML='';easteregg=lock=0;scene.style.transition='.8s';movesnake()",13000)}},checkgrid=()=>{if(!ba&&null!==W){for(solved=1,i=0;i<ea;i++)for(qa=0;qa<ea;qa++)self[`g${X}-${i}-${qa}`]&&(self[`g${X}-${i}-${qa}`].style.background=Y[i][qa]?"#000":"#fff"),self[`w${X}-{i}-${qa}`]&&(self[`w${X}-{i}-${qa}`].style.background=Z[i][qa]?"#000":"#fff");if(!(E[D]<ca||E[D]>ca+ea-1||F[D]<da||F[D]>da+ea-1||0>G[D]||G[D]>ea-1)){for(i=0;i<I;i++)self[`g${X}-${F[D-i]-da}-${E[D-i]-ca}`]&&(self[`g${X}-${F[D-i]-da}-${E[D-i]-ca}`].style.background=Y[F[D-i]-da][E[D-i]-ca]?"#080":"#F00"),(E[D-i]<ca||E[D-i]>ca+ea-1||F[D-i]<da||F[D-i]>da+ea-1||0>G[D-i]||G[D-i]>ea-1)&&(solved=0),$&&Y[F[D-i]-da]&&!Y[F[D-i]-da][E[D-i]-ca]&&(solved=0),_&&Z[ea-1-G[D-i]]&&!Z[ea-1-G[D-i]][E[D-i]-ca]&&(solved=0);for(i=0;i<ea;i++)for(qa=0;qa<ea;qa++)try{$&&3==self[`g${X}-${i}-${qa}`].style.backgroundColor.match(/0/g).length&&(solved=0),_&&3==self[`w${X}-${i}-${qa}`].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(ra){}if(solved){for(ba=1,o[q+"puzzle"+ia+W]=1,i=0;i<ea;i++)for(qa=0;qa<ea;qa++)self[`g${X}-${i}-${qa}`]&&(self[`g${X}-${i}-${qa}`].style.background=Y[i][qa]?"#44c":"fd0"),self[`w${X}-{i}-${qa}`]&&(self[`w${X}-{i}-${qa}`].style.background=Z[i][qa]?"#44c":"#fd0");fa++,o[q+"totalsolved"]=fa;var pa=1;for(var qa in T)T[qa][0]>=V[W][5]&&T[qa][0]<V[W][5]+V[W][0]&&T[qa][1]>=V[W][6]&&T[qa][1]<V[W][6]+V[W][0]&&(delete T[qa],pa++,setTimeout("self[\"cube"+qa+"\"].remove()",200*pa))}}}},checkapple=()=>{for(var pa in R)!o[q+"appleappeared"+ia+pa]&&(0<R[pa][3]&&R[pa][3]==I||0<R[pa][4]&&R[pa][4]==fa)&&(O=1,setTimeout(`scene.style.transform="translateX("+(-apples[`+pa+`][0]*sidesize)+"vh)translateY("+(-apples[`+pa+`][1]*sidesize)+"vh)translateZ(-5vh)rotateX(30deg)";
      
      L[P + "appleappeared"+pagename+"`+pa+`"] = 1;
      
      scene.style.transformOrigin=""+(apples[`+pa+`][0]*sidesize)+"vh "+(apples[`+pa+`][1]*sidesize)+"vh";

      // Show apple falling
      self["apple"+`+pa+`].className = "emoji apple";
      self["appleshadow"+`+pa+`].className = "emojishadow appleshadow";`,250),setTimeout("movesnake();lock=0",2e3))},onkeydown=oa=>{self["lurd************************l**r************l*d***u**u"[oa.which-37]]=1,(8==oa.which||18==oa.which)&&(B=1),16==oa.which&&(s=1),17==oa.which&&(c=1);var pa=0;if(K&&M&&E[D]>=ca&&E[D]<ca+V[W][1]&&F[D]>=da&&F[D]<da+V[W][1]&&0<=G[D]&&G[D]<ea?(pa=1,!ga&&(ga=D-1)):ga=0,82==oa.which&&pa){if(ga<=D)for(var qa=ga;qa<=D;qa++)E.pop(),F.pop(),G.pop(),H.pop();return D=ga-1,ga=0,void movesnake()}if(116!=oa.keyCode&&82!=oa.keyCode&&17!=oa.keyCode&&123!=oa.keyCode&&oa.preventDefault(),K&&!O&&(ha=0,l?aa&&pa&&E[D]==ca?(checkmove(ca+ea-1,F[D],G[D]),!ha&&(E.push(ca+ea-1),F.push(F[D]),G.push(G[D]),H.push(Math.PI/2),D++)):(checkmove(E[D]-1,F[D],G[D]),!ha&&(E.push(E[D]-1),F.push(F[D]),G.push(G[D]),H.push(Math.PI/2),D++)):r?aa&&pa&&E[D]==ca+ea-1?(checkmove(ca,F[D],G[D]),!ha&&(E.push(ca),F.push(F[D]),G.push(G[D]),H.push(-Math.PI/2),D++)):(checkmove(E[D]+1,F[D],G[D]),!ha&&(E.push(E[D]+1),F.push(F[D]),G.push(G[D]),H.push(-Math.PI/2),D++)):N?aa&&pa&&F[D]==da?(checkmove(E[D],da+ea-1,G[D]),!ha&&(E.push(E[D]),F.push(da+ea-1),G.push(G[D]),H.push(Math.PI),D++)):(checkmove(E[D],F[D]-1,G[D]),!ha&&(E.push(E[D]),F.push(F[D]-1),G.push(G[D]),H.push(Math.PI),D++)):d?aa&&pa&&F[D]==da+ea-1?(checkmove(E[D],da,G[D]),!ha&&(E.push(E[D]),F.push(da),G.push(G[D]),H.push(0),D++)):(checkmove(E[D],F[D]+1,G[D]),!ha&&(E.push(E[D]),F.push(F[D]+1),G.push(G[D]),H.push(0),D++)):(A||_)&&s?aa&&pa&&G[D]==ea-1?(checkmove(E[D],F[D],0),!ha&&(E.push(E[D]),F.push(F[D]),G.push(0),H.push(H[D]),D++)):(checkmove(E[D],F[D],G[D]+1),!ha&&(E.push(E[D]),F.push(F[D]),G.push(G[D]+1),H.push(H[D]),D++)):(A||_)&&c?aa&&pa&&0==G[D]?(checkmove(E[D],F[D],ea-1),!ha&&(E.push(E[D]),F.push(F[D]),G.push(ea-1),H.push(H[D]),D++)):0==G[D]?ha=1:(checkmove(E[D],F[D],G[D]-1),!ha&&(E.push(E[D]),F.push(F[D]),G.push(G[D]-1),H.push(H[D]),D++)):B&&D>I&&(H.pop(),E.pop(),F.pop(),G.pop(),D--),!ha&&!v&&(N||r||d||l||s||c||B)&&(movesnake(),J&&K&&checkgrid(),movesnake(1),checkapple(),O||(O=1,setTimeout("lock=0",150)),"hub"==ia&&14<=I&&20==E[D]&&10==F[D]))){O=1;var ra=0;for(qa=0;qa<I;qa++)ra--,setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push("+ra+");snakeangle.push(snakeangle[head]);head++;movesnake()",150*qa);setTimeout("location='editor.html'",100*qa),o[q+"snakex"]=20,o[q+"snakey"]=10}},onkeyup=()=>{N=r=d=l=s=c=B=0}};