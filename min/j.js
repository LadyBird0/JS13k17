a=function(){function ba(){var C=snake;L&&(C=snake2);C.innerHTML="";m=[];n=[];q=[];A=[];e=D-1;if("load"==t)for(i=0;i<D;i++)m[e-i]=2,n[e-i]=10,q[e-i]=-i,A[e-i]=0;else if(y.lossst_snakex){var k=+y.lossst_snakex,g=+y.lossst_snakey,f=+y.lossst_snakez;"hub"==t&&2>m&&(f=y.lossst_snakez=1);if("2-5"==t&&W&&1==L)for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i-1,A[e-i]=0;else if(2>k)for(i=0;i<D;i++)m[e-i]=k-i,n[e-i]=g,q[e-i]=f,A[e-i]=-Math.PI/2;else if(k>K-2)for(i=0;i<D;i++)m[e-i]=k+i,n[e-i]=g,q[e-i]=f,A[e-i]=
Math.PI/2;else if(2>g)for(i=0;i<D;i++)m[e-i]=k,n[e-i]=g-i,q[e-i]=f,A[e-i]=0;else if(g>h-2)for(i=0;i<D;i++)m[e-i]=k,n[e-i]=g+i,q[e-i]=f,A[e-i]=0;else for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i,A[e-i]=0}else if("hub"==b.className)for(i=0;i<D;i++)m[e-i]=20,n[e-i]=10,q[e-i]=-i-1,A[e-i]=0;for(i=0;i<Math.max(D+4,16);i++)C.innerHTML+="<div id=snakecubemove"+i+' class=snakecubemove style="transform:translateX(50vh)translateY(50vh)translateZ(-30vh);width:'+(u-1)+"vh;height:"+(u-1)+'vh"><div class=snakeshadow id=snakeshadow'+
i+"></div><div id=snakecuberotate"+i+' class=snakecuberotate><div class="cube snake" id=snakecube'+i+">"+(1>i?"<div class=tongue>Y</div>":"")+"<div class=front>"+(1>i?"\u203f":"")+'</div><div class=up style="font-size:'+.5*u+"vh;line-height:"+.8*u+'vh">'+(1>i?"\ud83d\udc40":"")+"</div><div class=right></div><div class=left></div><div class=back>"}function fa(){b.className=t;L&&(snake.innerHTML="");if("load"==t)h=K=20,H=[],E=[],z=[[-2,6,-Math.PI/2,6,0,"hub",0,20,10,0,0]],x=[],g=[eval("["+location.hash.slice(1)+
"]")],D=g[0][1],g[0][5]=g[0][6]=8,L=!!g[0][3],w=[["<a href='...' target=_blank>Twitter levels</a><br>Controls:<br>Move: arrow keys<br>"+(L?"Up/Down: Shift/Ctrl<br>":"")+"backtrack: Alt<br>Reset: R<br>\u2190 Exit",1,5,1,0,L,0]],y.lossst_puzzleload0&&delete y.lossst_puzzleload0,y.lossst_doorload0=1;else if("hub"==t){K=40;h=20;H=[[13,9,0],[6,13,0],[35,8,0]];E=[[11,11,0,0,0],[2,12,0,6,0],[38,10,0,7,0]];z=[[41,10,Math.PI/2,8,0,"1-1",1,0,10,0,0],[20,-2,0,14,0,"2-1",1,10,19,0,0],[-2,11,-Math.PI/2,6,0,"3-1",
1,14,5,1,1],[28,21,Math.PI,14,0,"1-4",1,22,1,0,0],[5,21,Math.PI,5,0,"2-5",1,36,1,0,1]];g=[];x=[];for(e=9;15>e;e++)for(m=0;5>m;m++)2==m&&14==e||2==m&&13==e||3==m&&13==e||3==m&&12==e||2==m&&12==e||x.push([m,e]);w=[["Move with arrow keys"+(P?"":" or WASD/ZQSD"),19,5,0,13,0],["Use the "+(P?"\u293a":"Alt")+" key to backtrack",1,9,0,13,0,1],["Doors indicate the snake size required to open them",35,14,0,13,0],["2D puzzle editor<br>\u2193",18,8,14,0,0],["\u2191<br>New puzzles!",22,3,14,0,0],["New ! Puzzle editor with wraps<br>\u2193",
19,8,6,7,1],["\u2190<br>New puzzles!",1,9,6,7,1,1],["Full puzzle editor (2D, 3D & wraps!)<br>\u2193",19,8,7,0,1]]}else if("1-1"==t)K=40,h=20,H=[[35,15,0]],E=[[33,16,0,0,6],[34,17,0,0,6],[37,15,0,0,6]],x=[],z=[[-2,10,-Math.PI/2,8,0,"hub",0,39,11,0,0],[35,21,Math.PI,11,0,"1-3",1,35,1,0,0]],g=[[6,8,0,,"000000001000001110001110001000000000",2,3],[6,8,0,,"000000011000011100010000011000000000",14,3],[6,8,0,,"000000000100001100011000011100000000",26,3],[5,8,0,,"0000001110011100110000000",2,13],[6,8,0,,"000000011000011000001100001100000000",
14,13],[6,8,0,,"000000000100001100001110001100000000",26,13]],w=[["Cover the black shapes to solve puzzles",9,9,1,0],["Solve all the puzzles in the room to get new apples",21,9,1,0],["Your progress is saved automatically",34,9,1,0]];else if("1-3"==t)k_reset.className="",y.lossst_reset=1,K=40,h=20,H=[[4,7,0]],E=[[2,8,0,0,12],[3,9,0,0,12]],z=[[35,-2,0,8,0,"1-1",0,35,19,0,0],[-2,10,-Math.PI/2,13,0,"1-4",1,39,10,0,0]],g=[[6,11,0,,"000000011110011010011110000000000000",8,2],[7,11,0,,"0000000001110000111000001100000110000010000000000",
18,2],[6,11,0,,"000000011000011110001010001110000000",28,2],[6,11,0,,"000000011100001110001110001100000000",8,11],[6,11,0,,"000000001110001110001110001010000000",18,11],[6,11,0,,"000000011110011110001100001000000000",28,11]],w=[["If you get stuck, "+(P?"click \u00d7":"press R")+" to exit a puzzle",35,9,1,0]],x=[[11,4],[21,15]];else if("1-4"==t)K=40,h=20,H=[[35,8,0]],E=[[34,11,0,0,18]],z=[[41,10,Math.PI/2,8,0,"1-3",0,1,10,0,0],[22,-2,0,14,0,"hub",1,28,19,0,0]],g=[[7,13,0,,"0000000000000001111000111100001111000100000000000",
2,3],[7,13,0,,"0000000001110000101000011100001110000110000000000",14,3],[6,13,0,,"000000001110011110011010001110000000",26,4],[7,13,0,,"0000000001100000111000011100001110000110000000000",2,12],[7,13,0,,"0000000000000001111100101010011111000000000000000",14,12],[6,13,0,,"000000011000011100011110011110000000",26,12]],w=[["\u2191<br>After this room, go north to test a puzzle editor and a new kind of puzzles!",22,11,13,1,0]],x=[[17,5],[18,8],[29,7],[27,5],[27,8],[29,13],[30,13],[30,14],[18,15],[16,15],
[6,13],[6,17],[7,8],[6,8],[5,8],[3,7],[3,8],[7,6],[7,5]];else if("2-1"==t)for(h=K=20,H=[[10,2,0]],E=[],z=[[10,21,Math.PI,14,0,"hub",0,20,0,0,0],[-2,5,-Math.PI/2,14,0,"2-15",0,24,12,0,0]],g=[[7,14,1,,"0100010011111000000000000000000000001111100100010",7,7]],w=[["Now you're thinking with wraps!",2,2,0,14,0]],x=[],e=0;20>e;e++)x.push([e,10]);else"2-15"==t?(h=K=25,H=[[5,12,0]],E=[[4,14,0,0,23]],z=[[26,12,Math.PI/2,14,0,"2-1",0,0,5,0,0],[-2,12,-Math.PI/2,15,0,"2-2",1,79,5,0,0]],g=[[7,14,1,,"1000001000000000000000010100011011011000111000001",
15,3],[6,14,1,,"110011100001000000100001100001110011",15,17],[5,14,1,,"1100111001100011001110011",3,3],[6,14,1,,"000011000011110001110001000011000011",3,17]],w=[["Reminder:<br>use "+(P?"\u293a":"Alt")+" to backtrack,<br>"+(P?"\u00d7":"R")+" to exit a puzzle.",11,12,1,0,0]],x=[]):"2-2"==t?(K=80,h=20,H=[[35,10,0]],E=[[38,11,0,0,35]],z=[[81,5,Math.PI/2,15,0,"2-15",0,0,12,0,0],[-2,15,-Math.PI/2,16,0,"2-3",1,19,5,0,0]],g=[[5,5,1,,"0111101001010110100011111",59,13],[5,5,1,,"1111011000111100001011110",48,
13],[5,5,1,,"1111101000011110111001100",37,13],[5,5,1,,"1111110000111001000011111",26,13],[5,5,1,,"1100101101001110011101101",15,13],[5,5,1,,"1111100001110010000111111",59,2],[5,5,1,,"1000110111100011000111111",48,2],[5,5,1,,"1000110101101011111110001",37,2],[5,5,1,,"1111110001000110000111111",26,2],[5,5,1,,"0111101100011100011011110",15,2],[5,5,1,,"1111101111001110001100001",4,8],[5,5,1,,"1010100101111010000111111",71,8]],w=[["This room hides a surprise!",72,2,0,15,0]],x=[]):"2-3"==t?(K=20,h=30,
H=[[5,25,0]],E=[[4,24,0,0,37],[7,25,0,0,37],[2,26,0,0,37],[3,28,0,0,37]],z=[[10,31,Math.PI,20,0,"2-4",1,10,1,0,0],[21,5,Math.PI/2,20,0,"2-2",0,1,15,0,0]],g=[[6,16,1,,"001000011000011100111111001110001000",7,7],[6,16,1,,"110001100001000111000111100001110001",7,17]],w=[],x=[]):"2-4"==t?(K=20,h=30,H=[[16,22]],E=[[18,22,0,0,39]],z=[[10,-2,0,20,0,"2-3",0,10,29,0,0],[21,25,Math.PI/2,21,0,"2-5",1,1,10,0,0]],g=[[6,16,1,,"001000011110111111011110011110001000",7,7],[6,16,1,,"110001100001000011000111001111111111",
7,17]],w=[],x=[]):"2-5"==t?(K=40,h=20,H=[],E=[[38,2,0,5,0]],z=[[-2,10,-Math.PI/2,1,0,"2-4",0,19,25,0,0],[36,-2,0,6,0,"hub",1,5,19,0,1]],g=[],w=[["Guess what, you finished the first half of the game!",5,9,1,0],["Little snake can move up and down with "+(P?"\u2b06\ufe0e and \u2b07\ufe0e":"Shift and Ctrl keys")+", and open black doors",30,9,1,0]],x=[[31,0],[31,1],[31,2],[31,3],[31,4],[31,5],[31,6],[32,6],[33,6],[34,6],[35,6],[36,6],[37,6],[38,6],[39,6]]):"3-1"==t?(K=15,h=70,H=[[2,62]],E=[[2,65,0,0,47],
[1,66,0,0,47]],z=[[16,5,Math.PI/2,6,0,"hub",0,1,11,0,1],[-2,65,-Math.PI/2,8,0,"3-3",1,19,65,0,1]],g=[[5,5,0,"0000000000000000000001110",,2,2],[4,5,0,"0000000001000110",,4,11],[5,5,0,"0000000000000000101001110",,6,20],[5,5,0,"0000000000000000111000100",,8,29],[4,5,0,"0000000001100110","0000011001100000",2,38],[4,5,0,"0000010001100100","0000011001100000",4,47],[4,5,0,"0000011001000100","0000010001100000",6,56],[4,5,0,"0000000001100110","0100011000100000",8,65]],w=[["You now have to match the patterns on the walls...",
10,2,1,0,1],["... and on the floor too!",10,40,1,0,1]],x=[]):"3-3"==t?(k_camleft.className=k_camright.className="",y.lossst_camera=1,K=20,h=75,H=[[2,2]],E=[[1,4,0,0,59],[2,5,0,0,59],[3,6,0,0,59],[4,2,0,0,59]],z=[[21,65,Math.PI/2,7,0,"3-1",0,1,65,0,1],[-2,5,-Math.PI/2,12,0,"3-6",1,14,5,0,1]],g=[[5,5,0,"0000000000010000110001110",,8,69],[6,5,0,"000000000000000000000100001110011000",,12,58],[5,5,0,"0000000000010000111001000",,2,58],[4,5,0,"0000001001100110","0000001001100000",2,45],[5,5,0,"0000000000000000010001110",
"0000000100001100110000000",12,45],[5,5,0,"0000000000000000101001110","0000001110010100000000000",2,34],[5,5,0,"0000000000000000011001100","0000001110011000010000000",12,34],[4,5,1,"0000011001100110","0110000000000110",2,22],[4,5,1,"1001000000001001","1001000000001001",12,22],[4,5,1,"0000010011110010","0000111101100000",2,12],[4,5,1,"0110010000000011","0000011100110000",12,12],[4,5,1,"1101000000000001","1101000000010001",12,2]],w=[["You can rotate the camera with "+(P?"<br>\u21bb and \u21ba":"the keys 1, 2 and 3"),
15,68,1,0,1],["Can you imagine what's coming next?",7,54,1,0,1],["Of course... 3D puzzles with wrap! Use "+(P?"\u2b06\ufe0e and \u2b07\ufe0e":"Shift and Ctrl")+" to wrap between top and bottom",7,24,1,0,1]],x=[]):"3-6"==t?(K=15,h=80,H=[[2,70]],E=[[1,73,0,0,68],[3,75,0,0,68]],z=[[16,5,Math.PI/2,12,0,"3-3",0,1,5,0,1],[-2,75,-Math.PI/2,14,0,"3-7",1,14,25,0,1]],g=[[5,5,0,"0000000000001001111100100",,2,2],[4,5,0,"0000010001100000",,5,11],[5,5,0,"0000000110000110111000010",,8,20],[5,5,0,"0000000000001000111011111",
"0000000000111001111100000",2,29],[4,5,0,"1000110011101111","0000001111110000",5,38],[4,5,0,"0000100011001110","1110110010000000",8,45],[4,5,1,"1000100110010001","0000100110010000",2,54],[4,12,1,"0000001011110100","0000110011110011",5,63],[5,12,1,"0100011000010000111001000","0000001110110000100000000",8,72]],w=[],x=[[6,12]]):"3-7"==t?(K=15,h=30,H=[[10,12]],E=[[8,11,0,0,71],[9,10,0,0,71],[10,9,0,0,71],[11,10,0,0,71],[12,11,0,0,71],[13,12,0,0,71]],z=[[16,25,Math.PI/2,14,0,"3-6",0,1,75,0,1],[-2,5,-Math.PI/
2,20,0,"3-8",1,14,5,0,1]],g=[[5,14,1,"0001100110011001100010000","0001100110011001100010000",2,24],[5,5,1,"1100010001000011000111000","0000011000110010000000000",4,13],[5,5,1,"1101110001000001000011000","1100010000000001000111011",6,2]],w=[],x=[]):"3-8"==t&&(K=15,h=48,H=[[10,41]],E=[[7,45,0,0,75]],z=[[16,5,Math.PI/2,20,0,"3-7",0,1,5,0,1]],g=[[4,20,1,"0000111101101111","1000111111111000",5,38],[4,20,1,"1111001001001111","1111101010101111",5,28],[4,20,1,"1111010101011101","0001101101101111",5,18],[4,
20,1,"1111000100011110","1111110110011111",5,8]],w=[],x=[]);scene.style.width=K*u+"vh";scene.style.height=h*u+"vh";objects.innerHTML="";puzzle.innerHTML="";for(var e in H)objects.innerHTML+="<div id=tree"+e+' class="emoji tree" style="left:'+H[e][0]*u+"vh;transform:translateX(-8vh)translateY("+(H[e][1]*u+4)+'vh)rotateX(-75deg)">\ud83c\udf33</div><div id=treeshadow'+e+' class="emojishadow treeshadow" style="left:'+H[e][0]*u+"vh;transform:translateX(-8vh)translateY("+(H[e][1]*u+4)+'vh)rotateZ(144deg)scaleY(1.5)">\ud83c\udf33';
for(e in E)y["lossst_appleeaten"+t+e]?delete E[e]:objects.innerHTML+="<div id=apple"+e+' class="emoji apple '+(y["lossst_appleappeared"+t+e]?"":"hidden")+'" style="left:'+E[e][0]*u+"vh;transform:translateY("+(E[e][1]*u+4)+'vh) rotateX(-65deg)">'+("3-8"==t?"\u26bd":"\ud83c\udf4e")+"</div><div id=appleshadow"+e+' class="emojishadow appleshadow '+(y["lossst_appleappeared"+t+e]?"":"hidden")+'" style="left:'+E[e][0]*u+"vh;transform:translateY("+(E[e][1]*u+3)+'vh)rotateZ(144deg)">'+("3-8"==t?"\u26bd":"\ud83c\udf4e");
for(e in z)objects.innerHTML+="<div id=door"+(""+t+e)+' class="door'+(y["lossst_door"+t+e]?" open":"")+'" style="left:'+(z[e][0]+.5)*u+"vh;top:"+(z[e][1]+.5)*u+"vh;transform:rotateZ("+z[e][2]+"rad)translateZ("+z[e][9]*u+'vh)"><div class="realdoor door'+z[e][10]+'" '+(z[e][6]?"":"hidden")+">"+z[e][3]+"</div><div class=path>";for(var k in g)for(var m in x)y["lossst_puzzle"+t+k]&&x[m][0]>=g[k][5]&&x[m][0]<g[k][5]+g[k][0]&&x[m][1]>=g[k][6]&&x[m][1]<g[k][6]+g[k][0]&&delete x[m];for(e in x)objects.innerHTML+=
"<div id=cube"+e+' class="cube rock" style="left:'+x[e][0]*u+"vh;top:"+x[e][1]*u+'vh;width:7.2vh;height:7.2vh"><div class=front></div><div class=up style="background-position:'+(-300-x[e][0]*u)+"vh "+(-140-x[e][1]*u)+'vh"></div><div class=right></div><div class=left>';for(e in w)L^w[e][5]||!(w[e][3]&&w[e][3]<=D||w[e][4]&&w[e][4]>=D)||(objects.innerHTML+="<div id=hint"+(""+t+e)+' class="hint" style="left:'+(w[e][1]*u+1)+"vh;transform:translateY("+(w[e][2]*u+4)+"vh)translateZ("+(w[e][6]*u||0)+'vh)rotateX(-70deg)translateY(-4vh)">'+
w[e][0]);for(k in g){v=g[k][0];var f="",n="";puzzle.innerHTML+="<div id=puzzle"+k+' class="cube wrap visible '+(g[k][2]&&!y["lossst_puzzle"+t+k]?"wrapvisible":"")+'" style="left:'+g[k][5]*u+"vh;top:"+g[k][6]*u+"vh;width:"+g[k][0]*u+"vh;height:"+v*u+'vh">'+(g[k][2]?"<div class=left></div><div class=right></div>":"")+"<div id=down"+k+" class=down></div><div id=back"+k+" class=back></div>"+(g[k][2]?"<div class=front>":"");var q="000",A="fff";y["lossst_puzzle"+t+k]&&(q="44c",A="fd0");for(e=0;e<v;e++)for(m=
0;m<v;m++)g[k][3]&&(f+="<div class=cell id=w"+k+"-"+e+"-"+m+" style='width:"+u+"vh;height:"+u+"vh;background:#"+("1"==g[k][3][e*v+m]?q:A)+"'></div>"),g[k][4]&&(n+="<div class=cell id=g"+k+"-"+e+"-"+m+" style='width:"+u+"vh;height:"+u+"vh;background:#"+("1"==g[k][4][e*v+m]?q:A)+"'></div>");self["down"+k]&&(self["down"+k].innerHTML+=n);self["back"+k]&&(self["back"+k].innerHTML+=f)}"3-8"==t&&(objects.innerHTML+="<div style='position:fixed;transform:rotateZ(-90deg)translateX(-113vh)translateY(22vh)translateZ(317vh);font:30vh/30vh a'>THE<br><br>END");
"hub"!=t||y.lossst_snakex?(scene.style.transition="transform .8s, transform-origin .8s linear",ba()):(Q=1,setTimeout('resetsnake();movesnake();snakecubemove0.style.transition="transform .5s"',2E3),setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",4500),setTimeout("snakecubemove0.style.transition='';snakeshadow0.style.transition=snakecuberotate0.style.transition='transform .2s';snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+
-Math.PI/4+"rad)'",5E3),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='rotateZ("+Math.PI/4+"rad)'",5500),setTimeout("snakeshadow0.style.transform=snakecuberotate0.style.transform='';",6E3),setTimeout("scene.style.transition='transform .8s, transform-origin .8s linear';snakeshadow0.style.transition=snakecuberotate0.style.transition='';lock=0;if(mobile){k_up.className=k_down.className=k_left.className=k_right.className='';L[P+'wasd']=1}",9E3));movesnake()}function da(){scene.style.transform=
"translateX(-"+m[e]*u+"vh)translateY(-"+n[e]*u+"vh)translateZ(15vh)rotateX(40deg)rotateZ("+X+"rad)"}var X=0,y=localStorage,W=0,L=+y.lossst_son||0,P=+y.lossst_mobile||0,u=7,e=0,m=[],n=[],q=[],A=[],D=y.lossst_snakelength=+y.lossst_snakelength||5;console.log(D);var Y=r=d=l=s=c=B=0,Q=0,H=[],E=[],z=[],x=[],w=[],g=[],J=null,M="e",R=[],S=[],Z=0,V=0,T=0,O=0,F=0,G=0,v=0,aa=+y.lossst_totalsolved||0,U=0,N=0,I=0,t="",K=h=0;movesnake=function(C){for(f=0;f<D;f++){if(!C){var k=oldx=oldy=oldz=newx=newy=newz=0;T&&
v&&(m[e-f-1]==F&&m[e-f]==F+v-1?(k=1,oldx=F-1,newx=F+v,oldy=newy=n[e-f],oldz=newz=q[e-f]):m[e-f-1]==F+v-1&&m[e-f]==F?(k=1,oldx=F+v,newx=F-1,oldy=newy=n[e-f],oldz=newz=q[e-f]):n[e-f-1]==G&&n[e-f]==G+v-1?(k=1,oldy=G-1,newy=G+v,oldx=newx=m[e-f],oldz=newz=q[e-f]):n[e-f-1]==G+v-1&&n[e-f]==G?(k=1,oldy=G+v,newy=G-1,oldx=newx=m[e-f],oldz=newz=q[e-f]):0==q[e-f-1]&&q[e-f]==v-1?(k=1,oldz=-1,newz=v,oldx=newx=m[e-f],oldy=newy=n[e-f]):q[e-f-1]==v-1&&0==q[e-f]&&(k=1,oldz=v,newz=-1,oldx=newx=m[e-f],oldy=newy=n[e-
f]));if(k)self["snakecuberotate"+f].style.transform="rotateZ("+A[e-f]+"rad)",self["snakecubemove"+f].style.transform="translateX("+(oldx*u+.5)+"vh)translateY("+(oldy*u+.5)+"vh)translateZ("+(oldz*u+.5)+"vh)scale(.01)scaleZ(.01)",setTimeout("snakecubemove"+f+".style.transition='none'",150),setTimeout("snakecubemove"+f+".style.transform=`translateX(${"+newx+"*sidesize+.5}vh)translateY(${"+newy+"*sidesize+.5}vh)translateZ(${"+newz+"*sidesize+.5}vh)scale(.01)`",175),setTimeout("snakecubemove"+f+".style.transition='';snakecubemove"+
f+".style.transform=`translateX(${snakex["+(e-f)+"]*sidesize+.5}vh)translateY(${snakey["+(e-f)+"]*sidesize+.5}vh)translateZ(${snakez["+(e-f)+"]*sidesize+.5}vh)`",200);else try{self["snakecubemove"+f].style.transform="translateX("+(m[e-f]*u+.5)+"vh)translateY("+(n[e-f]*u+.5)+"vh)translateZ("+(q[e-f]*u+.9)+"vh)",self["snakecuberotate"+f].style.transform="rotateZ("+A[e-f]+"rad)"}catch(ca){}try{self["snakeshadow"+f].style.display=0==q[e-f]?"":"none"}catch(ca){}}null===J||y["lossst_puzzle"+t+J]?(scene.style.transform=
"translateX("+-m[e]*u+"vh)translateY("+-n[e]*u+"vh)translateZ(15vh)rotateX(40deg)",scene.style.transformOrigin=""+m[e]*u+"vh "+n[e]*u+"vh"):(scene.style.transform="translateX("+(-(F+g[J][0]/2)*u+5)+"vh)translateY("+(-(G+g[J][0]/2)*u+8)+"vh)translateZ("+(60-g[J][0]*(u+3))+"vh)rotateX(30deg)",scene.style.transformOrigin=""+((F+g[J][0]/2)*u+5)+"vh "+((G+g[J][0]/2-1)*u+8)+"vh")}C=L?1:0;for(f=0;f<D;f++){if(0>=q[e-f]){C=0;break}for(w in x)x[w][0]==m[e-f]&&x[w][1]==n[e-f]&&1==q[e-f]&&(C=0)}if(C){for(f=0;f<
D;f++)q[e-f]--;try{movesnake()}catch(ca){for(var w=2*D;w--;)m.pop(),n.pop(),q.pop(),A.pop(),e--;U=0;movesnake()}}C=m[e];k=n[e];for(var f in z)(z[f][10]&&L||!z[f][10]&&!L)&&self["door"+t+f]&&0<z[f][3]&&D>=z[f][3]&&4>Math.hypot(C-z[f][0],k-z[f][1])&&(self["door"+t+f].className="door open",y["lossst_door"+t+f]=1),self["door"+t+f]&&"door open"==self["door"+t+f].className&&2>Math.hypot(C-z[f][0],k-z[f][1])&&(y.lossst_page=t=z[f][5],setTimeout(fa,600),y.lossst_snakex=z[f][7],y.lossst_snakey=z[f][8],y.lossst_snakez=
0,y.lossst_snakeangle=A[e]);null!==J&&checkgrid();J=null;R=[];S=[];for(p in g)if(C>=g[p][5]&&C<g[p][5]+g[p][0]&&k>=g[p][6]&&k<g[p][6]+g[p][0]){J=+p;O=0;y["lossst_puzzle"+t+p]&&(O=1);M=p;Z=!!g[p][4];V=!!g[p][3];T=!!g[p][2];F=g[p][5];G=g[p][6];v=g[p][0];for(f=0;f<v;f++)for(R[f]=[],S[f]=[],w=0;w<v;w++)g[p][3]&&(S[f][w]=+g[p][3][f*g[p][0]+w]),g[p][4]&&(R[f][w]=+g[p][4][f*g[p][0]+w]);checkgrid()}};checkmove=function(C,k,u){I=0;if(0>C||C>=K||0>k||k>=h)I=1;for(var f in H)C>=H[f][0]-1&&C<=H[f][0]+1&&k==H[f][1]&&
(I=1);for(f in w)C>=w[f][1]&&C<=w[f][1]+3&&k==w[f][2]&&D>=w[f][3]&&(!w[f][4]||D<=w[f][4])&&(L&&w[f][5]||!L&&!w[f][5])&&(I=1);for(f in E)if(y["lossst_appleappeared"+t+f]&&C==E[f][0]&&k==E[f][1])if("3-8"==t)for(f in Q=1,setTimeout("rot=Math.PI/2;move_scene();appleshadow0.remove();apple0.style.transform='translateY(319vh)translateZ(2vh)rotateX(-65deg)rotateY(90deg)';apple0.style.transition=scene.style.transition='10s';apple0.style.transform='translateY(15vh)translateZ(2vh)rotateX(-65deg)';scene.style.transform='translateX(-207vh)translateY(-320vh)translateZ(-300vh)rotateX(0deg)rotateZ(1.5708rad)'",
200),g)setTimeout("back"+f+".style.transition='.5s';back"+f+".style.transform='translateY(-125%)'",[1400,2500,3800,5500][f]);else delete E[f],self["apple"+f].remove(),self["appleshadow"+f].remove(),D++,y.lossst_snakelength=D,y["lossst_appleeaten"+t+f]=1,"2-2"==t&&16==D&&(W=Q=1,scene.style.transition="5s",scene.style.transform="translateX(-256vh)translateY(-95vh)translateZ(-400vh)rotateX(0deg)rotateZ(180deg)",setTimeout("scene.style.transition='.8s';lock=easteregg=0;movesnake()",1E4));for(f in x)C==
x[f][0]&&k==x[f][1]&&0==u&&(I=1);for(f in z)self["door"+t+f]&&"door open"==self["door"+t+f].className&&2>=Math.hypot(C-z[f][0],k-z[f][1])&&(I=0);for(f=D-2;0<f;f--)m[e-f]==C&&n[e-f]==k&&q[e-f]==u&&(I=1);for(p in g)g[p][3]&&C>=g[p][5]&&C<g[p][5]+g[p][0]&&(k==g[p][6]-1&&n[e]==g[p][6]&&!g[p][2]||k==g[p][6]&&n[e]==g[p][6]-1)&&(I=1);if("2-5"==t&&18==C&&!L){W=L=Q=I=1;y.lossst_son=1;y.lossst_snakelength=D=5;for(f=0;21>f;f++)x.push([m[e-f],n[e-f]]),self["snakecubemove"+f].id="",self["snakecuberotate"+f].id=
"",self["snakeshadow"+f].id="",self["snakecube"+f].id="";scene.style.transition="2s";ba();movesnake();scene.style.transform="translateX(-142vh)translateY(-70vh)translateZ(80vh)rotateX(45deg)";scene.style.transformOrigin="140vh 70vh";setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push(0);snakeangle.push(snakeangle[head]);head++;movesnake()",3E3);setTimeout("text.innerHTML='Daddy!'",4E3);setTimeout("text.innerHTML=''",6E3);setTimeout("text.innerHTML='I lossst my soccer ball!'",
7E3);setTimeout("text.innerHTML=''",9E3);setTimeout("text.innerHTML='But I found new moves!'",1E4);setTimeout("text.innerHTML='';easteregg=lock=0;scene.style.transition='.8s';movesnake();checkapple();k_top.className=k_bottom.className='';L[P+'topbottom']=1",13E3)}};checkgrid=function(){if(!O&&null!==J){solved=1;for(i=0;i<v;i++)for(k=0;k<v;k++)self["g"+M+"-"+i+"-"+k]&&(self["g"+M+"-"+i+"-"+k].style.background=R[i][k]?"#000":"#fff"),self["w"+M+"-"+i+"-"+k]&&(self["w"+M+"-"+i+"-"+k].style.background=
S[i][k]?"#000":"#fff");if(!(m[e]<F||m[e]>F+v-1||n[e]<G||n[e]>G+v-1||0>q[e]||q[e]>v-1)){for(i=0;i<D;i++){self["g"+M+"-"+(n[e-i]-G)+"-"+(m[e-i]-F)]&&(self["g"+M+"-"+(n[e-i]-G)+"-"+(m[e-i]-F)].style.background=R[n[e-i]-G][m[e-i]-F]?"#080":"#f00");n[e-i]>=G&&n[e-i]<G+v&&self["w"+M+"-"+(v-1-q[e-i])+"-"+(m[e-i]-F)]&&(self["w"+M+"-"+(v-1-q[e-i])+"-"+(m[e-i]-F)].style.background=S[v-1-q[e-i]][m[e-i]-F]?"#080":"#f00");if(m[e-i]<F||m[e-i]>F+v-1||n[e-i]<G||n[e-i]>G+v-1||0>q[e-i]||q[e-i]>v-1)solved=0;Z&&R[n[e-
i]-G]&&!R[n[e-i]-G][m[e-i]-F]&&(solved=0);V&&S[v-1-q[e-i]]&&!S[v-1-q[e-i]][m[e-i]-F]&&(solved=0)}for(i=0;i<v;i++)for(k=0;k<v;k++){try{Z&&3==self["g"+M+"-"+i+"-"+k].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(ea){}try{V&&3==self["w"+M+"-"+i+"-"+k].style.backgroundColor.match(/0/g).length&&(solved=0)}catch(ea){}}if(solved){O=1;self["puzzle"+J].classList.remove("wrapvisible");y["lossst_puzzle"+t+J]=1;for(i=0;i<v;i++)for(k=0;k<v;k++)self["g"+M+"-"+i+"-"+k]&&(self["g"+M+"-"+i+"-"+k].style.background=
R[i][k]?"#44c":"#fd0"),self["w"+M+"-"+i+"-"+k]&&(self["w"+M+"-"+i+"-"+k].style.background=S[i][k]?"#44c":"#fd0");aa++;y.lossst_totalsolved=aa;var C=1,k;for(k in x)x[k][0]>=g[J][5]&&x[k][0]<g[J][5]+g[J][0]&&x[k][1]>=g[J][6]&&x[k][1]<g[J][6]+g[J][0]&&(delete x[k],C++,setTimeout('self["cube'+k+'"].remove()',200*C))}}}};checkapple=function(){for(var e in E)!y["lossst_appleappeared"+t+e]&&(0<E[e][3]&&E[e][3]==D||0<E[e][4]&&E[e][4]==aa)&&(Q=1,P&&"hub"==t&&1==e&&(k_backtrack.className="",y.lossst_backtrack=
1),setTimeout('scene.style.transform="translateX("+(-apples['+e+'][0]*sidesize)+"vh)translateY("+(-apples['+e+'][1]*sidesize)+"vh)translateZ(-5vh)rotateX(30deg)";\n\n      L[P + "appleappeared"+pagename+"'+e+'"] = 1;\n\n      scene.style.transformOrigin=""+(apples['+e+'][0]*sidesize)+"vh "+(apples['+e+'][1]*sidesize)+"vh";\n\n      // Show apple\n      self["apple"+'+e+'].className = "emoji apple";\n      self["appleshadow"+'+e+'].className = "emojishadow appleshadow";',250),setTimeout("movesnake();lock=0",
2E3))};testinbounds=function(){N=0;J=null;for(p in g)m[e]>=g[p][5]&&m[e]<g[p][5]+g[p][0]&&n[e]>=g[p][6]&&n[e]<g[p][6]+g[p][0]&&0<=q[e]&&q[e]<g[p][0]&&(J=+p,N=1)};onkeydown=function(g){self["lurd************************l**r************l*d***u**u"[g.which-37]]=1;if(8==g.which||18==g.which)B=1;16==g.which&&(s=1);17==g.which&&(c=1);if(49==g.which||97==g.which)X=-1.2,da();50!=g.which&&98!=g.which||movesnake();if(51==g.which||99==g.which)X=1.2,da();testinbounds();N?checkgrid():U=0;if(82==g.which&&N){if(U<=
e)for(var k=U;k<=e;k++)m.pop(),n.pop(),q.pop(),A.pop();e=U-1;U=0;movesnake();checkgrid()}else if(116!=g.which&&82!=g.which&&17!=g.which&&123!=g.which&&g.preventDefault&&g.preventDefault(),!Q){I=0;if(l)!O&&T&&N&&m[e]==F?(checkmove(F+v-1,n[e],q[e]),I||(m.push(F+v-1),n.push(n[e]),q.push(q[e]),A.push(Math.PI/2),e++)):(checkmove(m[e]-1,n[e],q[e]),I||(m.push(m[e]-1),n.push(n[e]),q.push(q[e]),A.push(Math.PI/2),e++));else if(r)!O&&T&&N&&m[e]==F+v-1?(checkmove(F,n[e],q[e]),I||(m.push(F),n.push(n[e]),q.push(q[e]),
A.push(-Math.PI/2),e++)):(checkmove(m[e]+1,n[e],q[e]),I||(m.push(m[e]+1),n.push(n[e]),q.push(q[e]),A.push(-Math.PI/2),e++));else if(Y)!O&&T&&N&&n[e]==G?(checkmove(m[e],G+v-1,q[e]),I||(m.push(m[e]),n.push(G+v-1),q.push(q[e]),A.push(Math.PI),e++)):(checkmove(m[e],n[e]-1,q[e]),I||(m.push(m[e]),n.push(n[e]-1),q.push(q[e]),A.push(Math.PI),e++));else if(d)!O&&T&&N&&n[e]==G+v-1?(checkmove(m[e],G,q[e]),I||(m.push(m[e]),n.push(G),q.push(q[e]),A.push(0),e++)):(checkmove(m[e],n[e]+1,q[e]),I||(m.push(m[e]),n.push(n[e]+
1),q.push(q[e]),A.push(0),e++));else if((L||V)&&s){if(!N){g=D-1;for(k in x)x[k][0]==m[e]&&x[k][1]==n[e]&&g++;if(q[e]==g)return}!O&&T&&N&&q[e]==v-1?(checkmove(m[e],n[e],0),I||(m.push(m[e]),n.push(n[e]),q.push(0),A.push(A[e]),e++)):(checkmove(m[e],n[e],q[e]+1),I||(m.push(m[e]),n.push(n[e]),q.push(q[e]+1),A.push(A[e]),e++))}else(L||V)&&c?!O&&T&&N&&0==q[e]?(checkmove(m[e],n[e],v-1),I||(m.push(m[e]),n.push(n[e]),q.push(v-1),A.push(A[e]),e++)):0==q[e]?I=1:(checkmove(m[e],n[e],q[e]-1),I||(m.push(m[e]),n.push(n[e]),
q.push(q[e]-1),A.push(A[e]),e++)):B&&e>D&&(A.pop(),m.pop(),n.pop(),q.pop(),e--);if(!I&&!W&&(Y||r||d||l||s||c||B)){checkgrid();movesnake();movesnake(1);checkapple();Q||(Q=1,setTimeout("lock=0",150));if("hub"==t&&(L||14<=D)&&20==m[e]&&10==n[e]){Q=1;for(k=g=0;k<D;k++)g--,setTimeout("snakex.push(snakex[head]);snakey.push(snakey[head]);snakez.push("+g+");snakeangle.push(snakeangle[head]);head++;movesnake()",150*k);setTimeout("location='editor.html'",100*k);y.lossst_snakex=20;y.lossst_snakey=10}testinbounds();
N&&!U&&(U=e)}}};onkeyup=function(){Y=r=d=l=s=c=B=0}};